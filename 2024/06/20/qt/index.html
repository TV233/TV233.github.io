<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Tviak的普通观测站" href="https://blog.tviakowo.live/rss.xml"><link rel="alternate" type="application/atom+xml" title="Tviak的普通观测站" href="https://blog.tviakowo.live/atom.xml"><link rel="alternate" type="application/json" title="Tviak的普通观测站" href="https://blog.tviakowo.live/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="学习"><link rel="canonical" href="https://blog.tviakowo.live/2024/06/20/qt/"><title>C++ & Qt 复习笔记 | Tviak's Observatory = Tviak的普通观测站 = 跨出自己的舒适区很难，但跨出去了就是成长。</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">C++ & Qt 复习笔记</h1><div class="meta"><span class="item" title="创建时间：2024-06-20 13:38:53"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-06-20T13:38:53+08:00">2024-06-20</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>64k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>1:27</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Tviak's Observatory</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/88401634_p0.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/100999602_p0.png"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/100753211_p1.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/98830415_p0~1.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/100316398_pa0.jpg"></li><li class="item" data-background-image="https://cdn.jsdelivr.net/gh/TV233/blogpic@master/img/73619764_p0.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.tviakowo.live/2024/06/20/qt/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Tviak"><meta itemprop="description" content="跨出自己的舒适区很难，但跨出去了就是成长。, 观测世界和自己的一般通过观测者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Tviak的普通观测站"></span><div class="body md" itemprop="articleBody"><h2 id="c复习笔记"><a class="markdownIt-Anchor" href="#c复习笔记">#</a> C++ 复习笔记</h2><h3 id="c-复习笔记详细讲解"><a class="markdownIt-Anchor" href="#c-复习笔记详细讲解">#</a> C++ 复习笔记（详细讲解）</h3><h4 id="1-类与对象"><a class="markdownIt-Anchor" href="#1-类与对象">#</a> 1. 类与对象</h4><p><strong>类的定义：</strong></p><pre><code>class Rectangle &#123;
public:
    double length;  // 长度
    double width;   // 宽度

    double area() &#123; // 计算面积的成员函数
        return length * width;
    &#125;
&#125;;
</code></pre><p><strong>对象的创建与使用：</strong></p><pre><code>int main() &#123;
    Rectangle rect;       // 创建对象
    rect.length = 5;      // 访问成员变量
    rect.width = 10;
    double area = rect.area(); // 调用成员函数
    std::cout &lt;&lt; &quot;Area: &quot; &lt;&lt; area &lt;&lt; std::endl;
    return 0;
&#125;
</code></pre><p><strong>访问控制：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> radius<span class="token punctuation">;</span>  <span class="token comment">// 私有成员变量，只能在类内部访问</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 公有成员函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        radius <span class="token operator">=</span> r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">getRadius</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">// 公有成员函数</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">return</span> radius<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    Circle c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    c<span class="token punctuation">.</span><span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Radius: "</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span><span class="token function">getRadius</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="2-构造函数与析构函数"><a class="markdownIt-Anchor" href="#2-构造函数与析构函数">#</a> 2. 构造函数与析构函数</h4><p><strong>构造函数：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 构造函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">age</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Constructor called"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 析构函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Destructor called"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    Person <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>默认构造函数与带参构造函数：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span>string brand<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> year<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 默认构造函数</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        brand <span class="token operator">=</span> <span class="token string">"Unknown"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        year <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 带参构造函数</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">Car</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string b<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">brand</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">year</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    Car car1<span class="token punctuation">;</span>               <span class="token comment">// 调用默认构造函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    Car <span class="token function">car2</span><span class="token punctuation">(</span><span class="token string">"Toyota"</span><span class="token punctuation">,</span> <span class="token number">2020</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用带参构造函数</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="3-对象数组和对象指针"><a class="markdownIt-Anchor" href="#3-对象数组和对象指针">#</a> 3. 对象数组和对象指针</h4><p><strong>对象数组：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">Student</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">age</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    Student students<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#123;</span><span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"Bob"</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// 对象数组</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> students<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">&lt;&lt;</span> <span class="token string">" is "</span> <span class="token operator">&lt;&lt;</span> students<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> <span class="token string">" years old."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>对象指针：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span>string title<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Book</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string t<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">title</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    Book<span class="token operator">*</span> bookPtr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Book</span><span class="token punctuation">(</span><span class="token string">"C++ Programming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 new 创建对象</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Book title: "</span> <span class="token operator">&lt;&lt;</span> bookPtr<span class="token operator">-></span>title <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">delete</span> bookPtr<span class="token punctuation">;</span> <span class="token comment">// 释放内存</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="4-向函数传递对象"><a class="markdownIt-Anchor" href="#4-向函数传递对象">#</a> 4. 向函数传递对象</h4><p><strong>值传递：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Box</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">length</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">printLength</span><span class="token punctuation">(</span>Box b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Length: "</span> <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>length <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    Box <span class="token function">box</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">printLength</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 值传递</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>引用传递：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Box</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">length</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">printLength</span><span class="token punctuation">(</span><span class="token keyword">const</span> Box<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 引用传递</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Length: "</span> <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>length <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    Box <span class="token function">box</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">printLength</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引用传递</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>指针传递：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Box</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">length</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">void</span> <span class="token function">printLength</span><span class="token punctuation">(</span>Box<span class="token operator">*</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 指针传递</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Length: "</span> <span class="token operator">&lt;&lt;</span> b<span class="token operator">-></span>length <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    Box <span class="token function">box</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">printLength</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指针传递</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="5-静态成员与友元"><a class="markdownIt-Anchor" href="#5-静态成员与友元">#</a> 5. 静态成员与友元</h4><p><strong>静态成员变量和静态成员函数：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> balance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">double</span> interestRate<span class="token punctuation">;</span> <span class="token comment">// 静态成员变量</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">Account</span><span class="token punctuation">(</span><span class="token keyword">double</span> b<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">balance</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setInterestRate</span><span class="token punctuation">(</span><span class="token keyword">double</span> rate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 静态成员函数</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        interestRate <span class="token operator">=</span> rate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">getBalanceWithInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> balance <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> interestRate<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">double</span> Account<span class="token double-colon punctuation">::</span>interestRate <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span> <span class="token comment">// 静态成员变量初始化</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    Account <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token class-name">Account</span><span class="token double-colon punctuation">::</span><span class="token function">setInterestRate</span><span class="token punctuation">(</span><span class="token number">0.03</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Balance with interest: "</span> <span class="token operator">&lt;&lt;</span> a1<span class="token punctuation">.</span><span class="token function">getBalanceWithInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>友元函数和友元类：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">Box</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">length</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">printLength</span><span class="token punctuation">(</span><span class="token keyword">const</span> Box<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 友元函数声明</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">void</span> <span class="token function">printLength</span><span class="token punctuation">(</span><span class="token keyword">const</span> Box<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 友元函数定义</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Length: "</span> <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">.</span>length <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    Box <span class="token function">box</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token function">printLength</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用友元函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="6-类的继承与派生"><a class="markdownIt-Anchor" href="#6-类的继承与派生">#</a> 6. 类的继承与派生</h4><p><strong>继承的定义和实现：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> area<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token keyword">double</span> <span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 纯虚函数</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Shape</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">double</span> radius<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">radius</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 重写基类的纯虚函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        area <span class="token operator">=</span> <span class="token number">3.14</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span> area<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    Circle <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Circle area: "</span> <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span><span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="7-多重继承"><a class="markdownIt-Anchor" href="#7-多重继承">#</a> 7. 多重继承</h4><p><strong>多重继承派生类</strong> <strong>调用顺序是：</strong></p><p>①调用基类构造函数，各个基类按定义时的次序先后调用；</p><p>②调用子对象构造函数，各个子对象按声明时的次序先后调用；</p><p>③执行派生类初始化列表；</p><p>④执行派生类初始化函数体；</p><p><strong>多重继承的实现：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>						<span class="token comment">// 声明为基类 A </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span>							<span class="token comment">// 外部接口</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> nv<span class="token operator">=</span>n<span class="token punctuation">;</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">"Member of A"</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> <span class="token string">"fun of A"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"fun of A"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span> <span class="token keyword">int</span> nv<span class="token punctuation">;</span>						<span class="token comment">// 私有成员 </span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B1</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">A</span></span><span class="token punctuation">&#123;</span>				<span class="token comment">// 声明 A 为虚基类</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">B1</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">A</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">"Member of B1"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>	<span class="token comment">//B1 类的构造函数</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span> <span class="token keyword">int</span> nv1<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B2</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">A</span>					<span class="token comment">// 声明 A 为虚基类</span></span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span> </pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token function">B2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">A</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Member of B2"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>	<span class="token comment">//B2 类的构造函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">int</span> nv2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">B1</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">B2</span></span> </pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">// 派生类的构造函数的成员初始化列表中必须列出对虚基类构造函数的调用</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">A</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">B1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">B2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Member of C"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">void</span> <span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"fun of C"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span> <span class="token keyword">int</span> nvd<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>C <span class="token function">c1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="32"></td><td><pre>c1<span class="token punctuation">.</span><span class="token function">fund</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="33"></td><td><pre>c1<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 					<span class="token comment">// 不会产生二义性 </span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment">// 运行结果</span></pre></td></tr><tr><td data-num="38"></td><td><pre>Member of A </pre></td></tr><tr><td data-num="39"></td><td><pre>Member of B1 </pre></td></tr><tr><td data-num="40"></td><td><pre>Member of B2 </pre></td></tr><tr><td data-num="41"></td><td><pre>Member of C </pre></td></tr><tr><td data-num="42"></td><td><pre>fun of C </pre></td></tr><tr><td data-num="43"></td><td><pre>fun of A</pre></td></tr></table></figure><h4 id="8-多态性"><a class="markdownIt-Anchor" href="#8-多态性">#</a> 8. 多态性</h4><p><strong>多态性的实现：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 虚函数</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Animal sound"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 重写虚函数</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Woof"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 重写虚函数</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Meow"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    Animal<span class="token operator">*</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    Animal<span class="token operator">*</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    a1<span class="token operator">-></span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用 Dog 类的 speak 方法</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    a2<span class="token operator">-></span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用 Cat 类的 speak 方法</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">delete</span> a1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">delete</span> a2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="c-复习题目"><a class="markdownIt-Anchor" href="#c-复习题目">#</a> C++ 复习题目</h3><h4 id="1-类与对象-2"><a class="markdownIt-Anchor" href="#1-类与对象-2">#</a> 1. 类与对象</h4><p><strong>重点知识：</strong></p><ul><li>类的定义：class 关键字、类成员、成员函数</li><li>对象的创建与使用</li><li>访问控制：public, private, protected</li></ul><p><strong>例题：</strong></p><ol><li>简述类与对象的区别。</li><li>编写一个类 <code>Rectangle</code> ，包含成员变量 <code>length</code> 和 <code>width</code> ，以及计算面积的成员函数。</li></ol><p><strong>参考解答：</strong></p><ol><li>类是一个数据类型，是对一类对象的描述；对象是类的实例。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">double</span> width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    Rectangle rect<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    rect<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    rect<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Area: "</span> <span class="token operator">&lt;&lt;</span> rect<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="2-构造函数与析构函数-2"><a class="markdownIt-Anchor" href="#2-构造函数与析构函数-2">#</a> 2. 构造函数与析构函数</h4><p><strong>重点知识：</strong></p><ul><li>构造函数：定义、重载、默认构造函数、带参构造函数</li><li>析构函数：定义、作用</li></ul><p><strong>例题：</strong></p><ol><li>什么是构造函数和析构函数？它们的作用是什么？</li><li>编写一个类 <code>Person</code> ，包含姓名和年龄，定义一个带参数的构造函数和析构函数。</li></ol><p><strong>参考解答：</strong></p><ol><li>构造函数用于初始化对象，析构函数用于清理资源。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    std<span class="token double-colon punctuation">::</span>string name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">name</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">age</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Constructor called"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Destructor called"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    Person <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="3-对象数组和对象指针-2"><a class="markdownIt-Anchor" href="#3-对象数组和对象指针-2">#</a> 3. 对象数组和对象指针</h4><p><strong>重点知识：</strong></p><ul><li>对象数组：定义、初始化、访问</li><li>对象指针：定义、访问成员</li></ul><p><strong>例题：</strong></p><ol><li>如何定义一个包含 10 个对象的数组？</li><li>编写一个类 <code>Circle</code> ，使用指针创建对象并访问成员变量。</li></ol><p><strong>参考解答：</strong></p><ol><li><code>Person people[10];</code></li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> radius<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">radius</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">3.14</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    Circle<span class="token operator">*</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Area: "</span> <span class="token operator">&lt;&lt;</span> c<span class="token operator">-></span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">delete</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="4-向函数传递对象-2"><a class="markdownIt-Anchor" href="#4-向函数传递对象-2">#</a> 4. 向函数传递对象</h4><p><strong>重点知识：</strong></p><ul><li>值传递</li><li>引用传递</li><li>指针传递</li></ul><p><strong>例题：</strong></p><ol><li>简述值传递和引用传递的区别。</li><li>编写一个函数，计算矩形对象的周长，使用引用传递。</li></ol><p><strong>参考解答：</strong></p><ol><li>值传递会复制对象，引用传递传递的是对象的引用，不会复制对象。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">double</span> width<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">double</span> <span class="token function">perimeter</span><span class="token punctuation">(</span>Rectangle<span class="token operator">&amp;</span> rect<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>length <span class="token operator">+</span> rect<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    Rectangle rect <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Perimeter: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">perimeter</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="5-静态成员与友元-2"><a class="markdownIt-Anchor" href="#5-静态成员与友元-2">#</a> 5. 静态成员与友元</h4><p><strong>重点知识：</strong></p><ul><li>静态成员变量和静态成员函数</li><li>友元函数和友元类</li></ul><p><strong>例题：</strong></p><ol><li>解释静态成员变量的用途。</li><li>编写一个类 <code>Account</code> ，定义静态成员变量 <code>interestRate</code> 和友元函数 <code>setInterestRate</code> 。</li></ol><p><strong>参考解答：</strong></p><ol><li>静态成员变量在所有对象间共享，适合表示类级别的属性。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">double</span> balance<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">double</span> interestRate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">Account</span><span class="token punctuation">(</span><span class="token keyword">double</span> b<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">balance</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setInterestRate</span><span class="token punctuation">(</span><span class="token keyword">double</span> rate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        interestRate <span class="token operator">=</span> rate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">getBalanceWithInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> balance <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> interestRate<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">double</span> Account<span class="token double-colon punctuation">::</span>interestRate <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    Account <span class="token function">a1</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token class-name">Account</span><span class="token double-colon punctuation">::</span><span class="token function">setInterestRate</span><span class="token punctuation">(</span><span class="token number">0.03</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Balance with interest: "</span> <span class="token operator">&lt;&lt;</span> a1<span class="token punctuation">.</span><span class="token function">getBalanceWithInterest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="6-类的继承与派生-2"><a class="markdownIt-Anchor" href="#6-类的继承与派生-2">#</a> 6. 类的继承与派生</h4><p><strong>重点知识：</strong></p><ul><li>基类和派生类</li><li>继承的方式：public, protected, private</li><li>派生类构造函数和析构函数</li></ul><p><strong>例题：</strong></p><ol><li>简述继承的作用。</li><li>编写一个基类 <code>Shape</code> 和派生类 <code>Square</code> ，派生类中计算正方形的面积。</li></ol><p><strong>参考解答：</strong></p><ol><li>继承用于实现代码重用和建立类之间的层次关系。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 纯虚函数</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Shape</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">double</span> side<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">Square</span><span class="token punctuation">(</span><span class="token keyword">double</span> s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">side</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span> side <span class="token operator">*</span> side<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    Square <span class="token function">sq</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Area of square: "</span> <span class="token operator">&lt;&lt;</span> sq<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="7-多重继承-2"><a class="markdownIt-Anchor" href="#7-多重继承-2">#</a> 7. 多重继承</h4><p><strong>重点知识：</strong></p><ul><li>多重继承的定义</li><li>菱形继承问题及虚继承</li></ul><p><strong>例题：</strong></p><ol><li>什么是多重继承？它带来了什么问题？</li><li>编写一个类 <code>A</code> 和两个派生类 <code>B</code> 和 <code>C</code> ，再创建一个类 <code>D</code> ，同时继承 <code>B</code> 和 <code>C</code> 。</li></ol><p><strong>参考解答：</strong></p><ol><li>多重继承指一个类可以有多个基类，它带来的问题是菱形继承导致的二义性。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Class A"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">A</span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">A</span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">C</span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    D d<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    d<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用 A 类的 show</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="8-多态性-2"><a class="markdownIt-Anchor" href="#8-多态性-2">#</a> 8. 多态性</h4><p><strong>重点知识：</strong></p><ul><li>多态的定义和作用</li><li>虚函数和纯虚函数</li><li>动态绑定</li></ul><p><strong>例题：</strong></p><ol><li>什么是多态？如何实现多态？</li><li>编写一个基类 <code>Animal</code> 和派生类 <code>Dog</code> 和 <code>Cat</code> ，基类中有一个虚函数 <code>speak</code> ，派生类分别重写该函数。</li></ol><p><strong>参考解答：</strong></p><ol><li>多态性允许在基类指针指向派生类对象时调用派生类的方法。通过虚函数实现。</li><li></li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Animal sound"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Woof"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Meow"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    Animal<span class="token operator">*</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    Animal<span class="token operator">*</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    a1<span class="token operator">-></span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Woof</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    a2<span class="token operator">-></span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Meow</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">delete</span> a1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">delete</span> a2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">//---- 迭代器 iterators---- </span></pre></td></tr><tr><td data-num="34"></td><td><pre>Iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回向量第 1 个元素为迭代器起始 </span></pre></td></tr><tr><td data-num="35"></td><td><pre>Iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 返回向量末尾元素为迭代器结束 </span></pre></td></tr><tr><td data-num="36"></td><td><pre>reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 返回向量末尾元素为逆向迭代器起始</span></pre></td></tr><tr><td data-num="37"></td><td><pre>reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 返回向量第 1 个元素为逆向迭代器结束</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token comment">//---- 容量 capacity---- </span></pre></td></tr><tr><td data-num="39"></td><td><pre>size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回向量元素数目 </span></pre></td></tr><tr><td data-num="40"></td><td><pre>size_type <span class="token function">max_size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回向量能容纳的最大元素数目（长度）</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_type sz<span class="token punctuation">,</span>T c<span class="token operator">=</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重置向量长度为 sz，c 填充到扩充元素中</span></pre></td></tr><tr><td data-num="42"></td><td><pre>size_type <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回向量容器存储空间大小 </span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 测试向量是否为空 </span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 为向量申请能容纳 n 个元素的空间</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 					</pre></td></tr><tr><td data-num="47"></td><td><pre>vector V1<span class="token punctuation">,</span> V2<span class="token punctuation">;</span> 				<span class="token comment">// 定义向量</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">int</span> A<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1949</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">&#125;</span> <span class="token punctuation">,</span>i<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="49"></td><td><pre>vector<span class="token double-colon punctuation">::</span>iterator It<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="50"></td><td><pre>V1<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span>A<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//V1: 1949 10 1 </span></pre></td></tr><tr><td data-num="51"></td><td><pre>V2<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//V2: 10 10 10 </span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">//---- 元素存取 element access---- </span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 返回向量第 n 个位置元素的运算符，n 从 0 起</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token function">at</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回向量第 n 个位置元素，n 从 0 起 </span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回向量第 1 个元素 back (); // 返回向量末尾元素 </span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token comment">//---- 向量调节器 modifiers---- </span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 向量赋 n 个 u 值</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 增加一个元素到向量末尾</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 删除向量末尾元素</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span>size_type n<span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在向量 pos 处插入 n 个元素值 x，pos 从 1 起</span></pre></td></tr><tr><td data-num="61"></td><td><pre>iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 删除向量指定位置的元素，pos 从 1 起</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>vector<span class="token operator">&amp;</span> vec<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 与向量 vec 互换元素</span></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 清空向量</span></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> V1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//V1: 1949 10 1 1 2 3 4 5 </span></pre></td></tr><tr><td data-num="66"></td><td><pre>V1<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//V1: 1949 10 1 1 2 3 4</span></pre></td></tr><tr><td data-num="67"></td><td><pre>V1<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-=</span> V1<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//V1: 1945 10 1 1 2 3 4</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span>It<span class="token operator">=</span>V1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> It<span class="token operator">&lt;</span>V1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> It<span class="token operator">++</span><span class="token punctuation">)</span> V2<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>It<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 遍历 V1 向量</span></pre></td></tr><tr><td data-num="69"></td><td><pre> 						<span class="token comment">//V2: 10 10 10 1945 10 1 1 2 3 4</span></pre></td></tr><tr><td data-num="70"></td><td><pre>V2<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>V2<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//V2: 300 300 10 10 10 1945 10 1 1 2 3 4</span></pre></td></tr><tr><td data-num="71"></td><td><pre>V2<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>V2<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//V2: 300 300 10 10 10 10 1 1 2 3 4</span></pre></td></tr><tr><td data-num="72"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>V2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;</span>V2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>	<span class="token comment">// 输出 V2 向量元素</span></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token comment">//---- 容量 capacity---- </span></pre></td></tr><tr><td data-num="78"></td><td><pre><span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 测试是否为空队列 </span></pre></td></tr><tr><td data-num="79"></td><td><pre>size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回队列长度 </span></pre></td></tr><tr><td data-num="80"></td><td><pre><span class="token comment">//---- 元素存取 element access---- </span></pre></td></tr><tr><td data-num="81"></td><td><pre><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回队头元素 </span></pre></td></tr><tr><td data-num="82"></td><td><pre><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回队尾元素 </span></pre></td></tr><tr><td data-num="83"></td><td><pre><span class="token comment">//---- 队列运算 operations---- </span></pre></td></tr><tr><td data-num="84"></td><td><pre><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 插入一个元素到队尾 </span></pre></td></tr><tr><td data-num="85"></td><td><pre><span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 删除队列下一个元素 </span></pre></td></tr><tr><td data-num="86"></td><td><pre></pre></td></tr><tr><td data-num="87"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt; iostream ></span></span></pre></td></tr><tr><td data-num="88"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue></span>			<span class="token comment">// 使用队列</span></span></pre></td></tr><tr><td data-num="89"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> 			<span class="token comment">// 队列定义在 std 命名空间</span></pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token comment">// 队列示例</span></pre></td></tr><tr><td data-num="91"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 				</pre></td></tr><tr><td data-num="92"></td><td><pre>queue Q<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="93"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 进队 Q: 1 2 3 4 5 6</span></pre></td></tr><tr><td data-num="94"></td><td><pre>Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-=</span> Q<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 					<span class="token comment">//Q: -5 2 3 4 5 6</span></pre></td></tr><tr><td data-num="95"></td><td><pre><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span>Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span> Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> 	<span class="token comment">// 出队</span></pre></td></tr><tr><td data-num="96"></td><td><pre><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="97"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="98"></td><td><pre></pre></td></tr><tr><td data-num="99"></td><td><pre><span class="token comment">//---- 容量 capacity---- </span></pre></td></tr><tr><td data-num="100"></td><td><pre><span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 测试是否为空栈 </span></pre></td></tr><tr><td data-num="101"></td><td><pre>size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回栈长度 </span></pre></td></tr><tr><td data-num="102"></td><td><pre><span class="token comment">//---- 元素存取 element access---- </span></pre></td></tr><tr><td data-num="103"></td><td><pre><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回栈顶元素 </span></pre></td></tr><tr><td data-num="104"></td><td><pre><span class="token comment">//---- 栈运算 operations---- </span></pre></td></tr><tr><td data-num="105"></td><td><pre><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 进栈 </span></pre></td></tr><tr><td data-num="106"></td><td><pre><span class="token keyword">void</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 出栈</span></pre></td></tr><tr><td data-num="107"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt; iostream ></span></span></pre></td></tr><tr><td data-num="108"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt; stack ></span><span class="token comment">// 使用栈</span></span></pre></td></tr><tr><td data-num="109"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token comment">// 栈定义在 std 命名空间</span></pre></td></tr><tr><td data-num="110"></td><td><pre></pre></td></tr><tr><td data-num="111"></td><td><pre><span class="token comment">// 栈示例</span></pre></td></tr><tr><td data-num="112"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="113"></td><td><pre>stack S<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="114"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> S<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 进栈 S: 1 2 3 4 5 6</span></pre></td></tr><tr><td data-num="115"></td><td><pre><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>S<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cout<span class="token operator">&lt;&lt;</span>S<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span> S<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 出栈&#125; </span></pre></td></tr><tr><td data-num="116"></td><td><pre><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>   </pre></td></tr><tr><td data-num="119"></td><td><pre><span class="token comment">//---- 迭代器 iterators---- </span></pre></td></tr><tr><td data-num="120"></td><td><pre>iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回表头元素为迭代器起始 </span></pre></td></tr><tr><td data-num="121"></td><td><pre>iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 返回表尾元素为迭代器结束 </span></pre></td></tr><tr><td data-num="122"></td><td><pre>reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 返回表尾元素为逆向迭代器起始</span></pre></td></tr><tr><td data-num="123"></td><td><pre>reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 返回表头元素为逆向迭代器结束</span></pre></td></tr><tr><td data-num="124"></td><td><pre><span class="token comment">//---- 容量 capacity---- </span></pre></td></tr><tr><td data-num="125"></td><td><pre><span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 测试是否为空表 </span></pre></td></tr><tr><td data-num="126"></td><td><pre>size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回列表长度 </span></pre></td></tr><tr><td data-num="127"></td><td><pre>size_type <span class="token function">max_size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 返回列表能容纳的最大长度 </span></pre></td></tr><tr><td data-num="128"></td><td><pre><span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_type sz<span class="token punctuation">,</span>T c<span class="token operator">=</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重置列表长度为 sz，c 填充到扩充元素中</span></pre></td></tr><tr><td data-num="129"></td><td><pre><span class="token comment">//---- 元素存取 element access---- </span></pre></td></tr><tr><td data-num="130"></td><td><pre><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回表头元素 </span></pre></td></tr><tr><td data-num="131"></td><td><pre><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 返回表尾元素</span></pre></td></tr><tr><td data-num="132"></td><td><pre><span class="token comment">//---- 列表调节器 modifiers---- </span></pre></td></tr><tr><td data-num="133"></td><td><pre><span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 列表赋 n 个 u 值</span></pre></td></tr><tr><td data-num="134"></td><td><pre><span class="token keyword">void</span> <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 插入一个元素到表头</span></pre></td></tr><tr><td data-num="135"></td><td><pre><span class="token keyword">void</span> <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 删除表头元素 </span></pre></td></tr><tr><td data-num="136"></td><td><pre><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 增加一个元素到表尾</span></pre></td></tr><tr><td data-num="137"></td><td><pre><span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 删除表尾元素 </span></pre></td></tr><tr><td data-num="138"></td><td><pre><span class="token comment">// 在列表 pos 处插入 n 个元素值 x，pos 从 1 起 </span></pre></td></tr><tr><td data-num="139"></td><td><pre><span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span>size_type n<span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="140"></td><td><pre>iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 删除列表指定位置的元素，pos 从 1 起</span></pre></td></tr><tr><td data-num="141"></td><td><pre><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&amp;</span> lst<span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 与列表 lst 互换元素</span></pre></td></tr><tr><td data-num="142"></td><td><pre><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 清空列表</span></pre></td></tr><tr><td data-num="143"></td><td><pre><span class="token comment">//---- 列表运算 operations---- </span></pre></td></tr><tr><td data-num="144"></td><td><pre><span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 删除列表中值与 value 相同的所有元素</span></pre></td></tr><tr><td data-num="145"></td><td><pre><span class="token keyword">void</span> <span class="token function">remove_if</span><span class="token punctuation">(</span>Predicate pred<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 删除列表满足条件的元素</span></pre></td></tr><tr><td data-num="146"></td><td><pre><span class="token keyword">void</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 删除列表重复值 </span></pre></td></tr><tr><td data-num="147"></td><td><pre><span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span>list<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">// 合并列表 x，列表必须有序</span></pre></td></tr><tr><td data-num="148"></td><td><pre><span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 列表排序 </span></pre></td></tr><tr><td data-num="149"></td><td><pre><span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span>Compare comp<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 列表按 comp 关系比较排序</span></pre></td></tr><tr><td data-num="150"></td><td><pre><span class="token keyword">void</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 列表逆序 </span></pre></td></tr><tr><td data-num="151"></td><td><pre><span class="token keyword">void</span> <span class="token function">splice</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span> list<span class="token operator">&amp;</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">// 列表拼接函数</span></pre></td></tr><tr><td data-num="152"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="153"></td><td><pre><span class="token keyword">int</span> i<span class="token punctuation">,</span> A<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="154"></td><td><pre>list<span class="token double-colon punctuation">::</span>iterator It<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="155"></td><td><pre>list L1<span class="token punctuation">,</span> L2<span class="token punctuation">,</span> <span class="token function">L3</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span>A<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//L3: 15 36 7 17</span></pre></td></tr><tr><td data-num="156"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> L1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//L1: 1 2 3 4 5 6</span></pre></td></tr><tr><td data-num="157"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> L2<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//L2: 10 20 30</span></pre></td></tr><tr><td data-num="158"></td><td><pre>It<span class="token operator">=</span>L1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">advance</span><span class="token punctuation">(</span>It<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//It 指向 3 (第 3 个元素)</span></pre></td></tr><tr><td data-num="159"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>It<span class="token punctuation">,</span>L2<span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//L1: 1 2 10 20 30 3 4 5 6 L2(empty)</span></pre></td></tr><tr><td data-num="160"></td><td><pre>					<span class="token comment">//It 仍然指向 3 (第 6 个元素) </span></pre></td></tr><tr><td data-num="161"></td><td><pre>L2<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>L2<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>L1<span class="token punctuation">,</span>It<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//L1:1 2 10 20 30 4 5 6 L2:3</span></pre></td></tr><tr><td data-num="162"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//L1: 1 2 10 30 4 5 6 </span></pre></td></tr><tr><td data-num="163"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//L1: 1 2 4 5 6 10 30 </span></pre></td></tr><tr><td data-num="164"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>L3<span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//L1: 1 2 4 5 6 10 15 30 36 7 17</span></pre></td></tr><tr><td data-num="165"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span>L2<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		 <span class="token comment">//L1: 3 1 2 4 5 6 10 15 30 36 7 17</span></pre></td></tr><tr><td data-num="166"></td><td><pre>L1<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//L1: 17 7 36 30 15 10 6 5 4 2 1 3</span></pre></td></tr><tr><td data-num="167"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span>It<span class="token operator">=</span>L1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> It<span class="token operator">!=</span>L1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>It<span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span><span class="token operator">*</span>It<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="168"></td><td><pre><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="qt-对象模型复习笔记"><a class="markdownIt-Anchor" href="#qt-对象模型复习笔记">#</a> Qt 对象模型复习笔记</h2><h4 id="1-理解3个问题"><a class="markdownIt-Anchor" href="#1-理解3个问题">#</a> 1. 理解 3 个问题</h4><h5 id="1对象树的原理和实现-创建和析构顺序"><a class="markdownIt-Anchor" href="#1对象树的原理和实现-创建和析构顺序">#</a> （1）对象树的原理和实现、创建和析构顺序</h5><p><strong>对象树</strong>是 Qt 提供自动、有效的组织和管理继承自 QObject 对象的一种机制。父对象与子对象相互指向，整体结构关系相当于一个森林。</p><p><strong>对象树</strong>主要解决了两个问题：</p><ol><li><strong>内存管理</strong>：在 Qt 中，如果一个 QObject 对象（或任何继承自 QObject 的对象）有一个父对象，那么当父对象被删除时，所有的子对象也会被自动删除。这种机制允许开发者在不需要手动删除每一个对象的情况下，进行有效的内存管理。</li><li><strong>事件传播</strong>：Qt 的事件系统使用对象树来决定如何传播事件。例如，如果一个点击事件发生在一个按钮上，那么这个事件首先会被发送到按钮对象。如果按钮对象没有处理这个事件，那么事件会被发送到按钮的父对象，然后是父对象的父对象，以此类推，直到事件被处理或者到达对象树的根。</li></ol><p><strong>原理和实现</strong>：</p><ul><li><strong>对象树</strong>是通过将一个对象指定为另一个对象的父对象来形成的。所有继承自 <code>QObject</code> 的类都可以利用这种机制。</li><li><strong>子对象</strong>在父对象的析构函数中自动删除，这样可以确保内存管理的简化和防止内存泄漏。</li></ul><p><strong>创建顺序</strong>：</p><ul><li><p>父对象先创建，然后依次创建子对象。</p></li><li><p>例如：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QObject <span class="token operator">*</span>child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>QObject <span class="token operator">*</span>child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>QObject <span class="token operator">*</span>child1_1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>QObject <span class="token operator">*</span>child1_2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul><p><strong>析构顺序</strong>：</p><ul><li><p>父对象在析构时会自动删除所有的子对象。</p></li><li><p>例如：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">delete</span> parent<span class="token punctuation">;</span></pre></td></tr></table></figure><p>这会删除 <code>child1</code> , <code>child2</code> , <code>child1_1</code> 和 <code>child1_2</code> ，因为它们都是 <code>parent</code> 的子对象。</p></li></ul><h5 id="2动态属性的原理与实现"><a class="markdownIt-Anchor" href="#2动态属性的原理与实现">#</a> （2）动态属性的原理与实现</h5><p>属性系统提供开发者可以向 Qt 对象中添加自定义的属性，以便存储和访问特定的数据。</p><p><strong>原理</strong>：</p><ul><li><p><strong>属性定义</strong>：基于元对象系统（Meta-Class System），利用宏 Q_PROPORTY (…) 标记相关属性信息，将其注册到 QMetaObject 中。</p></li><li><p><strong>属性的使用</strong>：允许在运行时向 QObject 实例添加和删除动态属性，动态属性不需要在编译时声明，使用 API 操作（property () 和 setProperty () ）实现获取和设置属性。</p></li><li><p><strong>动态属性</strong>：函数 QObject::setProperty () 设置属性值时，如果属性名称不存在，就会为对象定义一个新的属性并设置属性值，这时定义的属性称为动态属性。</p><p>动态属性是针对类的实例定义的，所以只能使用函数 QObject::property () 读取动态属性的属性值。</p></li><li><p>动态属性允许在运行时向对象添加属性，而不需要在编译时定义这些属性。</p></li></ul><p><strong>实现</strong>：</p><ul><li><p>使用 <code>setProperty</code> 和 <code>property</code> 方法。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QObject obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>obj<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"dynamicProperty"</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> value <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">"dynamicProperty"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>动态属性存储在一个内部的哈希表中，这样可以在不修改类定义的情况下扩展对象的属性。</p></li></ul><h5 id="3信号与槽的实现原理-工作机制"><a class="markdownIt-Anchor" href="#3信号与槽的实现原理-工作机制">#</a> （3）信号与槽的实现原理、工作机制</h5><p><strong>1. 基本概念</strong>：基于观察者模式的设计模式，在 Qt 中采用信号 (Signals) 和槽 (Slots）机制用于 QObject 及其派生类对象之间的通信，所有继承自 QObject 或者它的一个子类（例如 QWidget）都可以包含信号和槽。</p><ul><li>信号是一种特殊的函数，用于通知其他对象发生了某个特定的事件。信号可以在任何时候被发射，且可以带有参数。</li><li>槽是一种普通的成员函数，用于接收信号并执行相应的操作。当信号被发射时，与之相连接的槽函数会被自动调用。</li><li>信号槽函数本质上也是一个回调函数，用于不同对象之间的通信，当某个对象内部的状态发生变化时，其他对象如果需要对其状态变化做出相应，只需要让这个类发出对应状态改变的信号即可，其他对象接收到这个信号以后，调用对应的槽函数进行相应的动作处理。</li><li>将函数的指针（地址）作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，称为回调函数。</li></ul><p><strong>原理</strong>：</p><ul><li><strong>信号</strong>是类中定义的事件，<strong>槽</strong>是处理这些事件的函数。通过信号与槽的连接，可以实现对象之间的通信。</li><li>可以将任意多个信号连接到一个槽，也可以将一个信号连接到任意多个插槽，还可以将一个信号直接连接到另一个信号，这将在第一个信号发出时立即发出第二个信号。</li></ul><p><strong>工作机制</strong>：</p><ul><li><p>使用 <code>connect</code> 函数连接信号和槽。</p></li><li><p>例如：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>senderObject<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> receiverObject<span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">slot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p>当 <code>signal</code> 发射时， <code>slot</code> 就会被调用。</p></li><li><p>Qt 使用元对象编译器（MOC）来处理信号与槽的连接，MOC 生成的代码管理这些连接和调用。在进行信号和槽的连接时，Qt 首先在元对象结构中找出要连接的信号和槽的索引，然后创建一个 QMetaObject::Connection 对象（下文简称 Connection）并添加到内部的链表中。由于存在一个信号连接多个槽的情况，因此 Connection 对象需要为每个 信号保存接收对象和槽的链表 QObjectPrivate::ConnectionList</p></li><li><p>所有连接到某个信号上的连接以单向链表的方式组织起来。</p><p>所有的信号则构成了一个链表向量类型 QObjectConnectionListVector 类型的变量 QObjectPrivate::connectionLists。</p></li><li><p><strong>解除与一个发射者所有信号的连接</strong>：</p></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">disconnect</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在这个例子中， <code>sender</code> 是发射信号的对象。这个调用会解除 <code>sender</code> 发射的所有信号与其连接的所有槽的连接。</p><ol><li><strong>解除与一个特定信号的所有连接</strong>：</li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">disconnect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">someSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在这个例子中， <code>sender</code> 是发射信号的对象， <code>someSignal()</code> 是要解除连接的信号。这个调用会解除 <code>sender</code> 发射的 <code>someSignal</code> 信号与其连接的所有槽的连接。</p><ol><li><strong>解除与一个特定接收者的所有连接</strong>：</li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">disconnect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在这个例子中， <code>sender</code> 是发射信号的对象， <code>receiver</code> 是接收信号的对象。这个调用会解除 <code>sender</code> 发射的所有信号与 <code>receiver</code> 的所有槽的连接。</p><ol><li><strong>解除特定的一个信号与槽的连接</strong>：</li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">disconnect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">someSignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">someSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>在这个例子中， <code>sender</code> 是发射信号的对象， <code>someSignal()</code> 是要解除连接的信号， <code>receiver</code> 是接收信号的对象， <code>someSlot()</code> 是要解除连接的槽。这个调用会解除 <code>sender</code> 发射的 <code>someSignal</code> 信号与 <code>receiver</code> 的 <code>someSlot</code> 槽的连接。</p><h4 id="2-理解qt元对象系统内容"><a class="markdownIt-Anchor" href="#2-理解qt元对象系统内容">#</a> 2. 理解 “Qt 元对象系统” 内容</h4><h5 id="1元对象"><a class="markdownIt-Anchor" href="#1元对象">#</a> （1）元对象</h5><ul><li><p><strong>QMetaObject 类的主要接口函数</strong>：</p><ul><li><strong>类的信息</strong>：如类名和基类名。</li><li><strong>附加信息</strong>：如类的元数据、信号与槽信息等。</li><li><strong>构造函数元数据</strong>：包含构造函数的信息。</li><li><strong>方法元数据</strong>：包含类中所有方法的信息。</li><li><strong>枚举类型元数据</strong>：包含类中所有枚举类型的信息。</li><li><strong>属性元数据</strong>：包含类中所有属性的信息。</li><li><strong>信号与槽</strong>：定义信号与槽的元数据和连接机制。</li><li><strong>静态函数</strong>：提供类的一些静态信息和方法【6:5†source】。</li></ul></li><li><p><strong>运行时类型信息</strong>：</p><ul><li><p>使用 <code>QMetaObject::className</code> 获取类名。</p></li><li><p>使用 <code>QMetaObject::inherits</code> 判断一个对象是否继承自某个类。</p></li><li><p>例如：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPushButton <span class="token operator">*</span>btn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">bool</span> result <span class="token operator">=</span> btn<span class="token operator">-></span><span class="token function">inherits</span><span class="token punctuation">(</span><span class="token string">"QPushButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li><li><p><strong>属性系统</strong>：</p><ul><li>定义属性并使用 <code>setProperty</code> 和 <code>property</code> 方法进行访问和修改。</li><li>使用 <code>Q_PROPERTY</code> 宏在类定义中声明属性。</li></ul></li><li><p><strong>信号与槽</strong>：</p><ul><li><p>使用 <code>connect()</code> 连接信号与槽，使用 <code>disconnect()</code> 断开连接。</p></li><li><p>自定义信号槽规则：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  Q_OBJECT</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  signals<span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">mySignal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token keyword">public</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">mySlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li></ul><h5 id="2对象树示例"><a class="markdownIt-Anchor" href="#2对象树示例">#</a> （2）对象树示例</h5><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QObject <span class="token operator">*</span>child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>QObject <span class="token operator">*</span>child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>QObject <span class="token operator">*</span>child1_1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>QObject <span class="token operator">*</span>child1_2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QObject</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">delete</span> parent<span class="token punctuation">;</span></pre></td></tr></table></figure><p>上述代码展示了对象树的创建和析构顺序，当 <code>parent</code> 被删除时，其子对象 <code>child1</code> 和 <code>child2</code> 以及 <code>child1</code> 的子对象 <code>child1_1</code> 和 <code>child1_2</code> 都会被自动删除。</p><h4 id="例题及参考解答"><a class="markdownIt-Anchor" href="#例题及参考解答">#</a> 例题及参考解答</h4><p><strong>例题</strong>：简述对象树的创建和析构顺序。</p><p><strong>参考解答</strong>： 对象树的创建顺序是：先创建父对象，然后依次创建子对象。例如，创建一个父对象 <code>parent</code> 后，再创建两个子对象 <code>child1</code> 和 <code>child2</code> ，它们都以 <code>parent</code> 为父对象。子对象可以继续拥有自己的子对象，例如 <code>child1_1</code> 和 <code>child1_2</code> ，它们都是 <code>child1</code> 的子对象。当父对象 <code>parent</code> 被删除时，所有的子对象 <code>child1</code> 和 <code>child2</code> 以及它们的子对象 <code>child1_1</code> 和 <code>child1_2</code> 都会被自动删除。</p><h2 id="事件系统复习笔记"><a class="markdownIt-Anchor" href="#事件系统复习笔记">#</a> 事件系统复习笔记</h2><h4 id="1-qt事件系统的基本原理和处理流程"><a class="markdownIt-Anchor" href="#1-qt事件系统的基本原理和处理流程">#</a> 1. Qt 事件系统的基本原理和处理流程</h4><p>事件机制的基本原理是消息循环。应用程序通常在启动时会传递给操作系统一个回调函数指针（Qt 中是 qt_internal_proc），在有消息需要发送给应用程序时，操作系统会调用此回调函数用以处理消息。应用程序也会在启动后专门开辟一个线程和设定一个消息队列用于消息循环，不断把消息队列中的消息转发给操作系统。</p><p>Qt 使用 QAbstractEventDispatcher 类来管理消息分发与 Qt 事件队列，因此需要在线程内部创建一个事件分发器对象。在 currentThread () 函数内部，创建 QThreadData 类对象 threadData，并创建一个 QAdoptedThread 类实例 threadData-&gt;thread，并把这个 thread 赋予 QCoreApplicationPrivate::theMainThread，作为 Qt 应用程序的主线程。QCoreApplication 类中的线程，是运行程序时由操作系统系统创建的，它由 QAdoptedThread 类对象管理。QAdoptedThread 类是 QCoreApplication 类中的线程的线程包装器，它不需要创建线程，而是在其 init () 函数中通过 GetCurrentThread () 函数直接获取应用程序主线程所在的程序。Qt 程序运行后，在 QCoreApplication::exec () 中调用 QEventLoop::exec () 进入消息循环，等待和处理应用程序的消息。</p><ul><li><strong>原理</strong>：<ul><li>GUI 应用程序是事件驱动的，Qt 事件系统将事件（如鼠标点击、键盘按下等）转化为 QEvent 对象进行处理。</li></ul></li><li><strong>处理流程</strong>：<ul><li>应用程序进入事件循环，通过 <code>exec()</code> 启动。</li><li>事件循环从操作系统接收事件，分发给合适的对象处理。</li></ul></li></ul><h4 id="2-事件的产生和派发"><a class="markdownIt-Anchor" href="#2-事件的产生和派发">#</a> 2. 事件的产生和派发</h4><ul><li><strong>事件类型</strong>：<ul><li>自生事件（由操作系统产生，如 QKeyEvent、QMouseEvent）</li><li>发布事件（由 Qt 或应用程序产生，如 QTimerEvent）</li><li>发送事件 (sentevent): 是由 Qt 或应用程序定向发送给某个对象的事件。应用程序使用态函数 QCoreApplication::sendEvent () 产生发送事件，由对象的 event () 函数直接处理。</li></ul></li><li><strong>事件队列</strong>：<ul><li>自生事件进入系统队列，发布事件进入 Qt 事件队列。</li></ul></li><li><strong>派发机制</strong>：<ul><li><code>postEvent()</code> 发布事件。</li><li><code>sendEvent()</code> 发送事件。</li></ul></li></ul><p>解决响应迟滞问题方法： ①多线程 例如一般的涉及网络大量数据传输的程序都会使用多线程，将界面更新与网络数据传输分别用两个线程去处理，这样就不会出现界面无响应的情况。</p><p>②调用静态函数 QCoreApplication::processEvents ()</p><p>在长时间占用 CPU 的代码段中，偶尔调用静态函数 processEvents ()，将事件队列里未处理的事件派发出去，让事件接收对象及时处理，这样就不至于出现停滞的现象。</p><h4 id="3-事件过滤器"><a class="markdownIt-Anchor" href="#3-事件过滤器">#</a> 3. 事件过滤器</h4><ul><li><p><strong>工作原理</strong>：</p><ul><li><p>一个界面组件如果要对事件进行处理，需要从父类继承定义一个新类，在新类里编写程序直接处理事件，或者将事件转换为信号。</p><p>如果不想定义一个新的类，可以用事件过滤器 (eventflter) 对界面组件的事件进行处理。事件过滤器是 QObject 提供的一种处理事件的方法，它可以将一个对象的事件委托给另一个对象（称为事件过滤器）来监视并处理。</p><p>例如：一个窗口可以作为其界面上的 QLabel 组件的事件过滤器，派发给 QLabel 组件的事件由窗口去处理，不需要为了处理某种事件而新定义一个标签类。</p></li></ul></li><li><p><strong>实现</strong>：</p><ul><li>使用 <code>installEventFilter()</code> 为对象安装事件过滤器。</li><li>事件过滤器对象需要重实现 <code>eventFilter()</code> 方法。</li></ul></li></ul><p><strong>例题</strong>： 简述事件过滤器的工作原理及实现方法。</p><p><strong>参考解答</strong>： 事件过滤器用于拦截对象的事件，进行预处理。通过 <code>installEventFilter()</code> 方法为对象安装事件过滤器，事件过滤器对象需要重实现 <code>eventFilter()</code> 方法来处理或过滤事件。</p><h3 id="事件系统示例程序"><a class="markdownIt-Anchor" href="#事件系统示例程序">#</a> 事件系统示例程序</h3><pre><code class="language-c++">Widget::Widget(QWidget *parent) : QWidget(parent), ui(new Ui::Widget) &#123;
    ui-&gt;setupUi(this);
    ui-&gt;labHover-&gt;installEventFilter(this);
    ui-&gt;labDBClick-&gt;installEventFilter(this); // 安装事件过滤器
&#125;

bool Widget::eventFilter(QObject *watched, QEvent *event) &#123;
    // 上面的 QLabel 组件的事件处理
    if (watched == ui-&gt;labHover) &#123;
        if (event-&gt;type() == QEvent::Enter) // 鼠标光标移入
            ui-&gt;labHover-&gt;setStyleSheet(&quot;background-color: rgb(170, 255, 255);&quot;);
        else if (event-&gt;type() == QEvent::Leave) &#123; // 鼠标光标离开
            ui-&gt;labHover-&gt;setStyleSheet(&quot;&quot;);
            ui-&gt;labHover-&gt;setText(&quot;靠近我，点击我&quot;);
        &#125;
        else if (event-&gt;type() == QEvent::MouseButtonPress) // 鼠标键按下
            ui-&gt;labHover-&gt;setText(&quot;button pressed&quot;);
        else if (event-&gt;type() == QEvent::MouseButtonRelease)
            ui-&gt;labHover-&gt;setText(&quot;button released&quot;);
    &#125;

    // 下面的 QLabel 组件的事件处理
    if (watched == ui-&gt;labDBClick) &#123;
        if (event-&gt;type() == QEvent::Enter) // 鼠标光标移入
            ui-&gt;labDBClick-&gt;setStyleSheet(&quot;background-color: rgb(85, 255, 127);&quot;);
        else if (event-&gt;type() == QEvent::Leave) &#123; // 鼠标光标离开
            ui-&gt;labDBClick-&gt;setStyleSheet(&quot;&quot;);
            ui-&gt;labDBClick-&gt;setText(&quot;可双击的标签&quot;);
        &#125;
        else if (event-&gt;type() == QEvent::MouseButtonDblClick) // 鼠标双击
            ui-&gt;labDBClick-&gt;setText(&quot;double clicked&quot;);
    &#125;

    return QWidget::eventFilter(watched, event); // 运行父类的 eventFilter() 函数
&#125;
</code></pre><h4 id="1-基本事件处理"><a class="markdownIt-Anchor" href="#1-基本事件处理">#</a> 1. 基本事件处理</h4><ul><li><strong>实现方法</strong>：<ul><li>重写 <code>event()</code> 方法处理事件。</li><li>常见事件处理函数如 <code>mousePressEvent()</code> 、 <code>keyPressEvent()</code> 等。</li></ul></li></ul><h4 id="2-事件与信号"><a class="markdownIt-Anchor" href="#2-事件与信号">#</a> 2. 事件与信号</h4><ul><li><strong>关系</strong>：<ul><li>某些事件（如按钮点击）可以触发信号，信号槽机制可用于响应这些事件。</li></ul></li></ul><p><strong>例题</strong>： 如何使用信号槽机制处理按钮点击事件？</p><p><strong>参考解答</strong>： 通过 <code>connect()</code> 方法将按钮的 <code>clicked()</code> 信号连接到槽函数。例如：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>button<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyClass<span class="token double-colon punctuation">::</span>onButtonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="3-事件过滤器示例"><a class="markdownIt-Anchor" href="#3-事件过滤器示例">#</a> 3. 事件过滤器示例</h4><ul><li><strong>实现方法</strong>：<ul><li>创建一个继承自 QObject 的类，重写 <code>eventFilter()</code> 方法。</li><li>使用 <code>installEventFilter()</code> 方法为目标对象安装该事件过滤器。</li></ul></li></ul><p><strong>例题</strong>： 编写一个简单的事件过滤器，拦截并处理键盘按下事件。</p><p><strong>参考解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">KeyPressFilter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">bool</span> <span class="token function">eventFilter</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>obj<span class="token punctuation">,</span> QEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-></span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QEvent<span class="token double-colon punctuation">::</span>KeyPress<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            QKeyEvent <span class="token operator">*</span>keyEvent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QKeyEvent<span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Key pressed:"</span> <span class="token operator">&lt;&lt;</span> keyEvent<span class="token operator">-></span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span> <span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">eventFilter</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 使用示例</span></pre></td></tr><tr><td data-num="17"></td><td><pre>KeyPressFilter <span class="token operator">*</span>filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">KeyPressFilter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>targetObject<span class="token operator">-></span><span class="token function">installEventFilter</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="线程同步复习笔记"><a class="markdownIt-Anchor" href="#线程同步复习笔记">#</a> 线程同步复习笔记</h2><h3 id="1qthread"><a class="markdownIt-Anchor" href="#1qthread">#</a> 1.QThread</h3><h4 id="11-基本概念"><a class="markdownIt-Anchor" href="#11-基本概念">#</a> 1.1 基本概念</h4><ul><li><code>QThread</code> 类提供不依赖平台的管理线程的方法。</li><li>设计多线程程序时，需要从 <code>QThread</code> 继承定义线程类，并重定义 <code>QThread</code> 的虚函数 <code>run()</code> ，在函数 <code>run()</code> 里处理线程的事件循环。</li><li><img data-src="https://cdn.jsdelivr.net/gh/TV233/blogpic@main//img/image-20240608171244065.png" alt="image-20240608171244065"></li></ul><h4 id="12-成员函数"><a class="markdownIt-Anchor" href="#12-成员函数">#</a> 1.2 成员函数</h4><ul><li><code>isFinished()</code> : 判断线程是否已结束。</li><li><code>isRunning()</code> : 判断线程是否正在运行。</li><li><code>priority()</code> : 返回线程的优先级。</li><li><code>setPriority(QThread::Priority priority)</code> : 设置线程的优先级。</li><li><code>wait(unsigned long time)</code> : 阻塞线程运行，直到线程结束或等待时间超过 <code>time</code> 毫秒。</li><li><code>exit(int returnCode = 0)</code> : 退出线程的事件循环。</li><li><code>quit()</code> : 退出线程的事件循环。</li><li><code>start(QThread::Priority priority=InheritPriority)</code> : 设置线程优先级并启动线程。</li><li><code>terminate()</code> : 终止线程运行。</li></ul><h4 id="13-基于-qthread-多线程编程示例"><a class="markdownIt-Anchor" href="#13-基于-qthread-多线程编程示例">#</a> 1.3 基于 QThread 多线程编程示例</h4><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TDiceThread</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">int</span> m_diceValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">bool</span> m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">bool</span> m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">explicit</span> <span class="token function">TDiceThread</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">diceBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">dicePause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">stopThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>signals<span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">newValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> seq<span class="token punctuation">,</span> <span class="token keyword">int</span> diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_stop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_paused<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            m_diceValue <span class="token operator">=</span> <span class="token class-name">QRandomGenerator</span><span class="token double-colon punctuation">::</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">bounded</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            m_seq<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            emit <span class="token function">newValue</span><span class="token punctuation">(</span>m_seq<span class="token punctuation">,</span> m_diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="2-线程同步"><a class="markdownIt-Anchor" href="#2-线程同步">#</a> 2. 线程同步</h3><h4 id="21-基本概念"><a class="markdownIt-Anchor" href="#21-基本概念">#</a> 2.1 基本概念</h4><ul><li>线程之间可能需要访问同一个变量，或者一个线程需要等待另一个线程完成某个操作后才产生相应的动作。</li></ul><h4 id="22-互斥量qmutex"><a class="markdownIt-Anchor" href="#22-互斥量qmutex">#</a> 2.2 互斥量（QMutex）</h4><ul><li><code>QMutex</code> 用于锁定和解锁线程访问的共享资源。</li><li>函数：<ul><li><code>void lock()</code> : 锁定互斥量。</li><li><code>void unlock()</code> : 解锁互斥量。</li><li><code>bool tryLock(int timeout = 0)</code> : 尝试锁定互斥量。</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TDiceThread</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">int</span> m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> m_diceValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">bool</span> m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">bool</span> m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">explicit</span> <span class="token function">TDiceThread</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">diceBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">dicePause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">stopThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">bool</span> <span class="token function">readValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>seq<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_stop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_paused<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            mutex<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            m_diceValue <span class="token operator">=</span> <span class="token class-name">QRandomGenerator</span><span class="token double-colon punctuation">::</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">bounded</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            m_seq<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            mutex<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            emit <span class="token function">newValue</span><span class="token punctuation">(</span>m_seq<span class="token punctuation">,</span> m_diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">bool</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">readValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>seq<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>diceValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mutex<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token operator">*</span>seq <span class="token operator">=</span> m_seq<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token operator">*</span>diceValue <span class="token operator">=</span> m_diceValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        mutex<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="23-互斥锁定器qmutexlocker"><a class="markdownIt-Anchor" href="#23-互斥锁定器qmutexlocker">#</a> 2.3 互斥锁定器（QMutexLocker）</h4><ul><li><code>QMutexLocker</code> 自动管理互斥量的锁定和解锁。</li><li>在 QMutexLocker 实例的生命周期内，互斥量是锁定的，超出范围后自动解锁。</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_stop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_paused<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            m_diceValue <span class="token operator">=</span> <span class="token class-name">QRandomGenerator</span><span class="token double-colon punctuation">::</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">bounded</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            m_seq<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            emit <span class="token function">newValue</span><span class="token punctuation">(</span>m_seq<span class="token punctuation">,</span> m_diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="24-信号量qsemaphore"><a class="markdownIt-Anchor" href="#24-信号量qsemaphore">#</a> 2.4 信号量（QSemaphore）</h4><ul><li><code>QSemaphore</code> 用于限制对资源的访问数量。</li><li>常用函数：<ul><li><code>void acquire(int n = 1)</code> : 请求资源。</li><li><code>void release(int n = 1)</code> : 释放资源。</li></ul></li></ul><h3 id="例题与参考解答"><a class="markdownIt-Anchor" href="#例题与参考解答">#</a> 例题与参考解答</h3><h4 id="例题1"><a class="markdownIt-Anchor" href="#例题1">#</a> 例题 1</h4><p><strong>问题</strong>：实现一个简单的掷骰子程序，其中包含一个主线程和一个工作线程。主线程负责显示结果，工作线程负责生成随机数。</p><p><strong>解答</strong>：</p><ol><li>定义工作线程类 <code>TDiceThread</code> ，继承自 <code>QThread</code> ，并重写 <code>run()</code> 函数。</li><li>在主线程中，创建 <code>TDiceThread</code> 的实例，并启动和停止线程。</li><li>使用信号和槽机制，将工作线程的结果传递到主线程。</li></ol><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QThread></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QRandomGenerator></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMutex></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TDiceThread</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QThread</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">int</span> m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> m_diceValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">bool</span> m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">bool</span> m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">explicit</span> <span class="token function">TDiceThread</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">diceBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">dicePause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">stopThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>signals<span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">newValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> seq<span class="token punctuation">,</span> <span class="token keyword">int</span> diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    m_stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    m_seq <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_stop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_paused<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            m_diceValue <span class="token operator">=</span> <span class="token class-name">QRandomGenerator</span><span class="token double-colon punctuation">::</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">bounded</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            m_seq<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            emit <span class="token function">newValue</span><span class="token punctuation">(</span>m_seq<span class="token punctuation">,</span> m_diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token function">msleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">TDiceThread</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QThread</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">diceBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> m_paused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">dicePause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> m_paused <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">TDiceThread</span><span class="token double-colon punctuation">::</span><span class="token function">stopThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> m_stop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    TDiceThread <span class="token operator">*</span>threadA<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">onNewValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> seq<span class="token punctuation">,</span> <span class="token keyword">int</span> diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">threadA</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">TDiceThread</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>threadA<span class="token punctuation">,</span> <span class="token operator">&amp;</span>TDiceThread<span class="token double-colon punctuation">::</span>newValue<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>onNewValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    threadA<span class="token operator">-></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    threadA<span class="token operator">-></span><span class="token function">stopThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    threadA<span class="token operator">-></span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">onNewValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> seq<span class="token punctuation">,</span> <span class="token keyword">int</span> diceValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token string">"第 %d 次掷骰子，点数为：%d"</span><span class="token punctuation">,</span> seq<span class="token punctuation">,</span> diceValue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    MainWindow w<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    w<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这段代码展示了如何创建一个多线程应用，其中主线程和工作线程通过信号和槽机制进行通信，实现了线程间的数据同步。</p><h3 id="线程同步的各种实现方式及其特点"><a class="markdownIt-Anchor" href="#线程同步的各种实现方式及其特点">#</a> 线程同步的各种实现方式及其特点</h3><h4 id="1-互斥量qmutex"><a class="markdownIt-Anchor" href="#1-互斥量qmutex">#</a> 1. 互斥量（QMutex）</h4><p><strong>特点</strong>：</p><ul><li>用于在线程之间保护共享资源，以防止多个线程同时访问同一资源。</li><li>提供两种锁定模式：普通模式（非递归）和递归模式（可以多次锁定）。</li><li>使用简单，效率高，适用于短时间的资源锁定。</li></ul><p><strong>常用函数</strong>：</p><ul><li><code>lock()</code> : 锁定互斥量。如果其他线程已经锁定了互斥量，则调用线程将阻塞，直到互斥量变得可用。</li><li><code>tryLock(int timeout = 0)</code> : 尝试锁定互斥量。如果锁定成功则返回 <code>true</code> ，否则返回 <code>false</code> 。可以设置超时时间。</li><li><code>unlock()</code> : 解锁互斥量。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 访问共享资源</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="2-互斥锁定器qmutexlocker"><a class="markdownIt-Anchor" href="#2-互斥锁定器qmutexlocker">#</a> 2. 互斥锁定器（QMutexLocker）</h4><p><strong>特点</strong>：</p><ul><li><code>QMutexLocker</code> 是一个帮助类，用于简化互斥量的使用。</li><li>自动管理互斥量的锁定和解锁，防止因异常或函数返回导致的死锁问题。</li><li>使用 <code>QMutexLocker</code> 时，只需在需要同步的代码块前创建一个 <code>QMutexLocker</code> 对象即可。</li></ul><p><strong>常用函数</strong>：</p><ul><li><code>QMutexLocker(QMutex *mutex)</code> : 构造函数，自动锁定传入的互斥量。</li><li><code>~QMutexLocker()</code> : 析构函数，自动解锁互斥量。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 访问共享资源</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span> <span class="token comment">// 离开作用域时，自动解锁</span></pre></td></tr></table></figure><h4 id="3-读写锁qreadwritelock"><a class="markdownIt-Anchor" href="#3-读写锁qreadwritelock">#</a> 3. 读写锁（QReadWriteLock）</h4><p><strong>特点</strong>：</p><ul><li>允许多个线程同时读取数据，但写入时只能有一个线程。</li><li>提供了比互斥量更高的并发性，适用于读多写少的场景。</li><li>支持递归读锁和递归写锁。</li></ul><p><strong>常用函数</strong>：</p><ul><li><code>lockForRead()</code> : 锁定读锁，允许多个线程同时读取。</li><li><code>lockForWrite()</code> : 锁定写锁，只允许一个线程写入。</li><li><code>unlock()</code> : 解锁读写锁。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QReadWriteLock rwLock<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">readFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    rwLock<span class="token punctuation">.</span><span class="token function">lockForRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 读取共享资源</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    rwLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">void</span> <span class="token function">writeFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    rwLock<span class="token punctuation">.</span><span class="token function">lockForWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 写入共享资源</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    rwLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="4-等待条件qwaitcondition"><a class="markdownIt-Anchor" href="#4-等待条件qwaitcondition">#</a> 4. 等待条件（QWaitCondition）</h4><p><strong>特点</strong>：</p><ul><li>用于在线程之间进行条件同步。</li><li>允许线程在特定条件下等待，并在条件满足时继续执行。</li><li>通常与 <code>QMutex</code> 一起使用。</li></ul><p><strong>常用函数</strong>：</p><ul><li><code>wait(QMutex *mutex, unsigned long time = ULONG_MAX)</code> : 释放互斥量并等待条件满足。</li><li><code>wakeOne()</code> : 唤醒一个等待的线程。</li><li><code>wakeAll()</code> : 唤醒所有等待的线程。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QWaitCondition condition<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 生产数据</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    condition<span class="token punctuation">.</span><span class="token function">wakeOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    condition<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 消费数据</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    mutex<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="5-信号量qsemaphore"><a class="markdownIt-Anchor" href="#5-信号量qsemaphore">#</a> 5. 信号量（QSemaphore）</h4><p><strong>特点</strong>：</p><ul><li>用于控制线程对资源的访问量。</li><li>可以控制同时访问某资源的线程数量。</li><li>在资源有限的情况下非常有用，比如限制对某个连接池的访问。</li></ul><p><strong>常用函数</strong>：</p><ul><li><code>acquire(int n = 1)</code> : 请求 <code>n</code> 个资源，如果资源不足则等待。</li><li><code>release(int n = 1)</code> : 释放 <code>n</code> 个资源，增加可用资源的数量。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QSemaphore <span class="token function">semaphore</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最大允许 5 个线程同时访问资源</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    semaphore<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 访问资源</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    semaphore<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="线程同步总结"><a class="markdownIt-Anchor" href="#线程同步总结">#</a> 线程同步总结</h3><ul><li><strong>互斥量</strong> 用于保护共享资源，防止多个线程同时访问，适用于短时间锁定。</li><li><strong>互斥锁定器</strong> 自动管理互斥量锁定和解锁，防止死锁。</li><li><strong>读写锁</strong> 允许多个线程同时读取，但写入时只能有一个线程，适用于读多写少的场景。</li><li><strong>等待条件</strong> 通过条件变量实现线程之间的同步等待，通常与互斥量一起使用。</li><li><strong>信号量</strong> 控制线程对资源的访问量，适用于限制资源访问的场景。</li></ul><p>通过理解和应用这些线程同步机制，可以编写出高效且安全的多线程程序。</p><h2 id="3线程池"><a class="markdownIt-Anchor" href="#3线程池">#</a> 3. 线程池</h2><p>线程池类 QThreadPool 是可重用的 QThread 的集合，线程池的作用是避免频繁创建和销毁线程所带来的系统开销。</p><p>在一个 QThreadPool 的线程中运行代码，一般可以继承 QRunnable 类并重写其 run () 方法，然后通过 QThreadPool::start () 将 QRunnable 子类对象放到 QThreadPool 的运行队列中。</p><p>每个 Qt 应用程序都有一个全局线程池，可以通过 QThreadPool::globalInstance () 访问，Qt 也允许开发人员创建和管理自己的 QThreadPool 类对象</p><h2 id="qt-绘图复习笔记"><a class="markdownIt-Anchor" href="#qt-绘图复习笔记">#</a> Qt 绘图复习笔记</h2><h4 id="重点掌握内容坐标系统与坐标变换-图形视图架构的含义"><a class="markdownIt-Anchor" href="#重点掌握内容坐标系统与坐标变换-图形视图架构的含义">#</a> 重点掌握内容：坐标系统与坐标变换、图形视图架构的含义</h4><h3 id="目录"><a class="markdownIt-Anchor" href="#目录">#</a> 目录</h3><ol><li>QPainter 绘图<ul><li>QPainterPath 的使用</li></ul></li><li>坐标系统与坐标变换<ul><li>坐标变换：平移、旋转、缩放、状态保存与恢复</li><li>视口和窗口：视口和窗口定义、物理坐标和逻辑坐标</li></ul></li><li>图形视图架构<ul><li>场景、视图与图形项定义</li><li>图形 / 视图架构的坐标系</li></ul></li><li>图像处理<ul><li>颜色数据的格式</li><li>图像格式</li><li>访问颜色数据</li></ul></li></ol><h3 id="1-qpainter-绘图"><a class="markdownIt-Anchor" href="#1-qpainter-绘图">#</a> 1. QPainter 绘图</h3><h4 id="11-基本概念-2"><a class="markdownIt-Anchor" href="#11-基本概念-2">#</a> 1.1 基本概念</h4><ul><li><code>QPainter</code> 类用于在小部件、图片和其他绘图设备上进行绘图操作。</li><li><code>QPainter</code> 支持高级的 2D 绘图特性，包括反走样、路径、渐变和透明度。</li></ul><h4 id="12-qpainterpath-的使用"><a class="markdownIt-Anchor" href="#12-qpainterpath-的使用">#</a> 1.2 QPainterPath 的使用</h4><ul><li><code>QPainterPath</code> 类用于构建和操作复杂的路径。</li><li>支持多个子路径，包括直线、曲线和闭合路径。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Widget</span><span class="token double-colon punctuation">::</span><span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span>event<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token double-colon punctuation">::</span>Antialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token double-colon punctuation">::</span>TextAntialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 生成五角星的 5 个顶点，假设原点在五角星中心</span></pre></td></tr><tr><td data-num="7"></td><td><pre>qreal R<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 半径</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">const</span> qreal Pi<span class="token operator">=</span><span class="token number">3.14159</span><span class="token punctuation">;</span><span class="token number">372</span></pre></td></tr><tr><td data-num="9"></td><td><pre>qreal deg<span class="token operator">=</span>Pi<span class="token operator">*</span><span class="token number">72</span><span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>QPoint points<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span> <span class="token function">QPoint</span><span class="token punctuation">(</span>R<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">QPoint</span><span class="token punctuation">(</span>R<span class="token operator">*</span><span class="token function">qCos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>R<span class="token operator">*</span><span class="token function">qSin</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">QPoint</span><span class="token punctuation">(</span>R<span class="token operator">*</span><span class="token function">qCos</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>R<span class="token operator">*</span><span class="token function">qSin</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token function">QPoint</span><span class="token punctuation">(</span>R<span class="token operator">*</span><span class="token function">qCos</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>R<span class="token operator">*</span><span class="token function">qSin</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">QPoint</span><span class="token punctuation">(</span>R<span class="token operator">*</span><span class="token function">qCos</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>R<span class="token operator">*</span><span class="token function">qSin</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 设置字体</span></pre></td></tr><tr><td data-num="16"></td><td><pre>QFont font<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>font<span class="token punctuation">.</span><span class="token function">setPointSize</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 设置画笔</span></pre></td></tr><tr><td data-num="20"></td><td><pre>QPen penLine<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>penLine<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>penLine<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>penLine<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>SolidLine<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>penLine<span class="token punctuation">.</span><span class="token function">setCapStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>FlatCap<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>penLine<span class="token punctuation">.</span><span class="token function">setJoinStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>BevelJoin<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setPen</span><span class="token punctuation">(</span>penLine<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 设置画刷</span></pre></td></tr><tr><td data-num="28"></td><td><pre>QBrush brush<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>brush<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>yellow<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>brush<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>SolidPattern<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画刷填充样式</span></pre></td></tr><tr><td data-num="31"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setBrush</span><span class="token punctuation">(</span>brush<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">// 设计绘制五角星的 PainterPath，以便重复使用</span></pre></td></tr><tr><td data-num="33"></td><td><pre>QPainterPath starPath<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">closeSubpath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 闭合路径，最后一个点与第一个点相连</span></pre></td></tr><tr><td data-num="40"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显示顶点编号</span></pre></td></tr><tr><td data-num="41"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>starPath<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>font<span class="token punctuation">,</span><span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">// 绘图，第一个五角星</span></pre></td></tr><tr><td data-num="46"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保存坐标状态</span></pre></td></tr><tr><td data-num="47"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span>starPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画五角星</span></pre></td></tr><tr><td data-num="49"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"S1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 恢复坐标状态</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token comment">// 第二个五角星</span></pre></td></tr><tr><td data-num="52"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 平移</span></pre></td></tr><tr><td data-num="53"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 缩放</span></pre></td></tr><tr><td data-num="54"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顺时针旋转</span></pre></td></tr><tr><td data-num="55"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span>starPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画五角星</span></pre></td></tr><tr><td data-num="56"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"S2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token comment">// 第三个五角星</span></pre></td></tr><tr><td data-num="58"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">resetTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 复位所有坐标变换</span></pre></td></tr><tr><td data-num="59"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 平移</span></pre></td></tr><tr><td data-num="60"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">145</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 逆时针旋转</span></pre></td></tr><tr><td data-num="61"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span>starPath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画五角星 10.2 坐标系统和坐标变换 373</span></pre></td></tr><tr><td data-num="62"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"S3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>event<span class="token operator">-></span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="2-坐标系统与坐标变换"><a class="markdownIt-Anchor" href="#2-坐标系统与坐标变换">#</a> 2. 坐标系统与坐标变换</h3><h4 id="21-坐标变换"><a class="markdownIt-Anchor" href="#21-坐标变换">#</a> 2.1 坐标变换</h4><h5 id="平移translation"><a class="markdownIt-Anchor" href="#平移translation">#</a> 平移（Translation）</h5><p><strong>示例</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h5 id="旋转rotation"><a class="markdownIt-Anchor" href="#旋转rotation">#</a> 旋转（Rotation）</h5><p><strong>示例</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h5 id="缩放scaling"><a class="markdownIt-Anchor" href="#缩放scaling">#</a> 缩放（Scaling）</h5><p><strong>示例</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h5 id="状态保存与恢复"><a class="markdownIt-Anchor" href="#状态保存与恢复">#</a> 状态保存与恢复</h5><p><strong>示例</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="22-视口和窗口"><a class="markdownIt-Anchor" href="#22-视口和窗口">#</a> 2.2 视口和窗口</h4><h5 id="定义"><a class="markdownIt-Anchor" href="#定义">#</a> 定义</h5><ul><li><strong>视口（Viewport）</strong>：是显示在设备上的区域。</li><li><strong>窗口（Window）</strong>：是逻辑坐标系中的区域。</li><li>视口是指绘图设备的任意一个矩形区域，它使用物理坐标系。可以只选取物理坐标系中的一个矩形区域来绘图，默认情况下，视口等于绘图设备的整个矩形区域。窗口与视口是同一个矩形区域， 但是窗口是用逻辑坐标系定义的，窗口可以直接定义矩形区域的逻辑坐标范围。</li></ul><h5 id="示例代码"><a class="markdownIt-Anchor" href="#示例代码">#</a> 示例代码</h5><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setViewport</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 定义视口</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">setWindow</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="3-图形视图架构"><a class="markdownIt-Anchor" href="#3-图形视图架构">#</a> 3. 图形视图架构</h3><h4 id="31-场景-视图与图形项定义"><a class="markdownIt-Anchor" href="#31-场景-视图与图形项定义">#</a> 3.1 场景、视图与图形项定义</h4><ul><li><p><strong>场景（Scene）</strong>： <code>QGraphicsScene</code> 用于管理和操作图形项。</p></li><li><p>场景是一个抽象的管理图形项的容器，可以向场景添加图形项，可以获取场景中的某个图形项。场景不是界面组件，它是不可见的。</p><p>QGraphicsScene 类提供绘图场景 (scene)， 它的父类是 QObject。</p></li><li><p><strong>视图（View）</strong>： <code>QGraphicsView</code> 用于显示场景中的内容。</p></li><li><p>视图用于显示场景中的内容。QGraphicsView 是图形 / 视图架构中的视图组件。QGraphicsView 的间接父类是 QWidget，它是一个界面组件。</p><p>一个场景可以设置多个视图，用于提供不同的显示界面。视图接收键盘和鼠标输入并转换为场景的事件，进行坐标变换后这些事件被传送给可视场景。</p></li><li><p><strong>图形项（Item）</strong>： <code>QGraphicsItem</code> 是场景中的基本绘图元素。</p></li><li><p>图形项是一些基本图形组件，相当于模型中的数据。一个图形项存储了绘制这个图形项的各种参数，场景管理所有图形项，而视图组件则负责绘制图形项。</p><p>一个图形项可以包含子图形项，图形项还支持碰撞检测，即检测是否与其他图形项碰撞。</p></li></ul><h4 id="32-图形视图架构的坐标系"><a class="markdownIt-Anchor" href="#32-图形视图架构的坐标系">#</a> 3.2 图形 / 视图架构的坐标系</h4><h5 id="坐标原点关系"><a class="markdownIt-Anchor" href="#坐标原点关系">#</a> 坐标原点关系</h5><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>MainWindow<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    ui<span class="token operator">-></span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    labViewCord<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"View 坐标： "</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    labViewCord<span class="token operator">-></span><span class="token function">setMinimumWidth</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    ui<span class="token operator">-></span>statusBar<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>labViewCord<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    labSceneCord<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Scene 坐标： "</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    labSceneCord<span class="token operator">-></span><span class="token function">setMinimumWidth</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    ui<span class="token operator">-></span>statusBar<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>labSceneCord<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    labItemCord<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Item 坐标： "</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    labItemCord<span class="token operator">-></span><span class="token function">setMinimumWidth</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    ui<span class="token operator">-></span>statusBar<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>labItemCord<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">//TGraphicsView 组件 view 的设置</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">setCursor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>CrossCursor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 十字形光标</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">setMouseTracking</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开启鼠标跟踪</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">setDragMode</span><span class="token punctuation">(</span>QGraphicsView<span class="token double-colon punctuation">::</span>RubberBandDrag<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 矩形选择框</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>ui<span class="token operator">-></span>view<span class="token punctuation">,</span><span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">mouseMovePoint</span><span class="token punctuation">(</span>QPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">do_mouseMovePoint</span><span class="token punctuation">(</span>QPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>ui<span class="token operator">-></span>view<span class="token punctuation">,</span><span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">mouseClicked</span><span class="token punctuation">(</span>QPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">do_mouseClicked</span><span class="token punctuation">(</span>QPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">iniGraphicsSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 图形 / 视图架构初始化</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">iniGraphicsSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    QRectF <span class="token function">rect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    scene<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsScene</span><span class="token punctuation">(</span>rect<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 场景坐标系定义</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">setScene</span><span class="token punctuation">(</span>scene<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 为视图设置场景</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 画一个矩形框，其大小等于场景的大小</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    QGraphicsRectItem <span class="token operator">*</span>item<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsRectItem</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 矩形框的大小正好等于场景的大小</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">// 可选择，可以获得焦点，但是不能移动</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    item<span class="token operator">-></span><span class="token function">setFlags</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsSelectable <span class="token operator">|</span> QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsFocusable<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    QPen pen<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    pen<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">10.3</span> 图形<span class="token operator">/</span>视图架构 <span class="token number">385</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    item<span class="token operator">-></span><span class="token function">setPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    scene<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 一个位于场景中心的椭圆，测试局部坐标</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    QGraphicsEllipseItem <span class="token operator">*</span>item2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">QGraphicsEllipseItem</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token comment">// 矩形框内创建椭圆，图形项的局部坐标，左上角坐标为 (-100,-50)，宽 200，高 100</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    item2<span class="token operator">-></span><span class="token function">setPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 图形项在场景中的坐标</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    item2<span class="token operator">-></span><span class="token function">setBrush</span><span class="token punctuation">(</span><span class="token function">QBrush</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>blue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    item2<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsMovable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 能移动</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    item2<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsSelectable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可选择</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    item2<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsFocusable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以获得焦点</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    scene<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token comment">// 一个圆，中心位于场景的边缘</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    QGraphicsEllipseItem <span class="token operator">*</span>item3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">QGraphicsEllipseItem</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">// 矩形框内创建圆，图形项的局部坐标，左上角坐标为 (-100,-50)，宽 200，高 100</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    item3<span class="token operator">-></span><span class="token function">setPos</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span><span class="token function">right</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rect<span class="token punctuation">.</span><span class="token function">bottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 图形项在场景中的坐标</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    item3<span class="token operator">-></span><span class="token function">setBrush</span><span class="token punctuation">(</span><span class="token function">QBrush</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>red<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    item3<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsMovable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 能移动</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    item3<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsSelectable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可选择</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    item3<span class="token operator">-></span><span class="token function">setFlag</span><span class="token punctuation">(</span>QGraphicsItem<span class="token double-colon punctuation">::</span>ItemIsFocusable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以获得焦点</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    scene<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>item3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    scene<span class="token operator">-></span><span class="token function">clearSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">do_mouseMovePoint</span><span class="token punctuation">(</span>QPoint point<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    labViewCord<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"View 坐标： %d,%d"</span><span class="token punctuation">,</span>point<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    QPointF pointScene<span class="token operator">=</span> ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">mapToScene</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变换为场景坐标</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    labSceneCord<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"Scene 坐标： %.0f,%.0f"</span><span class="token punctuation">,</span><span class="token number">386</span> 第 <span class="token number">10</span> 章 绘图</pre></td></tr><tr><td data-num="62"></td><td><pre>    pointScene<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pointScene<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">do_mouseClicked</span><span class="token punctuation">(</span>QPoint point<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    QPointF pointScene<span class="token operator">=</span> ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">mapToScene</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变换为场景坐标</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    QGraphicsItem <span class="token operator">*</span>item<span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    item<span class="token operator">=</span> scene<span class="token operator">-></span><span class="token function">itemAt</span><span class="token punctuation">(</span>pointScene<span class="token punctuation">,</span>ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取光标处的图形项</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        QPointF pointItem<span class="token operator">=</span> item<span class="token operator">-></span><span class="token function">mapFromScene</span><span class="token punctuation">(</span>pointScene<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变换为图形项的局部坐标</span></pre></td></tr><tr><td data-num="72"></td><td><pre>        labItemCord<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"Item 坐标： %.0f,%.0f"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        pointItem<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pointItem<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">resizeEvent</span><span class="token punctuation">(</span>QResizeEvent <span class="token operator">*</span>event<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    QString str<span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"Graphics View 坐标， 左上角总是(0,0)，宽度=%d， 高度=%d"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    ui<span class="token operator">-></span>labViewSize<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    QRectF rectF<span class="token operator">=</span> ui<span class="token operator">-></span>view<span class="token operator">-></span><span class="token function">sceneRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 场景的矩形区</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    QString str2<span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"QGraphicsView::sceneRect=(Left,Top,Width,Height)"</span></pre></td></tr><tr><td data-num="83"></td><td><pre>    <span class="token string">"=%.0f,%.0f,%.0f,%.0f"</span><span class="token punctuation">,</span> rectF<span class="token punctuation">.</span><span class="token function">left</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rectF<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rectF<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rectF<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>    ui<span class="token operator">-></span>labSceneRect<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    event<span class="token operator">-></span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li><code>graphicsView-&gt;setAlignment(Qt::AlignLeft | Qt::AlignTop);</code></li><li><code>graphicsView-&gt;setAlignment(Qt::AlignCenter);</code> // 缺省值</li><li><code>graphicsSence-&gt;setSceneRect(-100, -100, 100, 100);</code></li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QGraphicsScene <span class="token operator">*</span>scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>scene<span class="token operator">-></span><span class="token function">setSceneRect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>QGraphicsView <span class="token operator">*</span>view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsView</span><span class="token punctuation">(</span>scene<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>view<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignLeft <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>AlignTop<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>QGraphicsRectItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsRectItem</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>scene<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="4-图像处理"><a class="markdownIt-Anchor" href="#4-图像处理">#</a> 4. 图像处理</h3><h4 id="41-颜色数据的格式"><a class="markdownIt-Anchor" href="#41-颜色数据的格式">#</a> 4.1 颜色数据的格式</h4><p>图像 (image) 是在各种绘图设备上显示的二维的图，图像的数据可以看作二维数组，数组的每个元素就是 1 个像素的颜色数据，在绘图设备上显示图像就是设置每个像素的颜色。任何颜色都是红色、绿色、蓝色三原色的组合。1 个像素的颜色数据有多种表示格式，常见的有以下几种：</p><ul><li><strong>RGB</strong>：红、绿、蓝三通道颜色模型。</li><li><strong>ARGB</strong>：带有透明度通道的 RGB 模型。</li></ul><h4 id="42-图像格式"><a class="markdownIt-Anchor" href="#42-图像格式">#</a> 4.2 图像格式</h4><ul><li>常见的图像格式包括 BMP、JPEG、PNG、GIF 等。</li></ul><h4 id="43-访问颜色数据"><a class="markdownIt-Anchor" href="#43-访问颜色数据">#</a> 4.3 访问颜色数据</h4><ul><li><code>QImage</code> 类用于图像的表示和处理。</li><li>提供多种访问颜色数据的方法。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QImage <span class="token function">image</span><span class="token punctuation">(</span><span class="token string">"example.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 访问单个像素的颜色值</span></pre></td></tr><tr><td data-num="4"></td><td><pre>QRgb color <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">pixel</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> red <span class="token operator">=</span> <span class="token function">qRed</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> green <span class="token operator">=</span> <span class="token function">qGreen</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> blue <span class="token operator">=</span> <span class="token function">qBlue</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">int</span> alpha <span class="token operator">=</span> <span class="token function">qAlpha</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 修改单个像素的颜色值</span></pre></td></tr><tr><td data-num="11"></td><td><pre>image<span class="token punctuation">.</span><span class="token function">setPixel</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token function">qRgb</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_actFile_Open_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#123;</span><span class="token comment">//“打开” 按钮</span></pre></td></tr><tr><td data-num="15"></td><td><pre>QString curPath<span class="token operator">=</span> <span class="token class-name">QDir</span><span class="token double-colon punctuation">::</span><span class="token function">currentPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 应用程序当前目录</span></pre></td></tr><tr><td data-num="16"></td><td><pre>QString filter<span class="token operator">=</span> <span class="token string">"图片文件(*.bmp *.jpg *.png);;"</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token string">"BMP 文件(*.bmp);;JPG 文件(*.jpg);;PNG 文件(*.png)"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>QString fileName<span class="token operator">=</span> <span class="token class-name">QFileDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getOpenFileName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"选择图片文件"</span><span class="token punctuation">,</span>curPath<span class="token punctuation">,</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>ui<span class="token operator">-></span>statusbar<span class="token operator">-></span><span class="token function">showMessage</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>m_filename<span class="token operator">=</span> fileName<span class="token punctuation">;</span> <span class="token comment">// 保存当前图片文件名</span></pre></td></tr><tr><td data-num="23"></td><td><pre>QFileInfo <span class="token function">fileInfo</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token class-name">QDir</span><span class="token double-colon punctuation">::</span><span class="token function">setCurrent</span><span class="token punctuation">(</span>fileInfo<span class="token punctuation">.</span><span class="token function">absolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>m_image<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加载图片文件</span></pre></td></tr><tr><td data-num="26"></td><td><pre>QPixmap pixmap<span class="token operator">=</span> <span class="token class-name">QPixmap</span><span class="token double-colon punctuation">::</span><span class="token function">fromImage</span><span class="token punctuation">(</span>m_image<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建 QPixmap 对象用于界面显示</span></pre></td></tr><tr><td data-num="27"></td><td><pre>ui<span class="token operator">-></span>labPic<span class="token operator">-></span><span class="token function">setPixmap</span><span class="token punctuation">(</span>pixmap<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>ui<span class="token operator">-></span>tabWidget<span class="token operator">-></span><span class="token function">setCurrentIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token function">showImageFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显示图片属性</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>（<span class="token number">1</span>）图像缩放。图像缩放可以使用函数 <span class="token function">scaled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>来实现，该函数原型定义如下：</pre></td></tr><tr><td data-num="32"></td><td><pre>QImage <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">scaled</span><span class="token punctuation">(</span><span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>Qt<span class="token double-colon punctuation">::</span>AspectRatioMode aspectRatioMode <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>IgnoreAspectRatio<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>TransformationMode transformMode <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>FastTransformation<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>其中，参数 width 和 height 分别是缩放后的新图像的宽度和高度，单位是像素；参数 aspectRatioMode 控制是否保持图像的长宽比，默认值 Qt<span class="token double-colon punctuation">::</span>IgnoreAspectRatio 表示忽略长宽比，也可以设置为保持长宽比，也就是设置值为 Qt<span class="token double-colon punctuation">::</span>KeepAspectRatio； 参数 transformMode 表示变换模式，默认值 Qt<span class="token double-colon punctuation">::</span>FastTransformation表示快速转换，不做平滑处理，也可以设置值为 Qt<span class="token double-colon punctuation">::</span>SmoothTransformation，表示进行平滑处理。</pre></td></tr><tr><td data-num="35"></td><td><pre>函数 <span class="token function">scaled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>返回缩放后的图像副本，原图像不变。</pre></td></tr><tr><td data-num="36"></td><td><pre>示例程序中将缩放后的图像又保存到原图像，所以会改变图像的物理尺寸，需要调用函数 <span class="token function">showImageFeatures</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>显示图像尺寸信息。</pre></td></tr><tr><td data-num="37"></td><td><pre>图像缩放还可以使用函数 <span class="token function">scaledToHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>和 <span class="token function">scaledToWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>来实现，它们分别用于指定高度或宽度进行缩放，函数原型定义如下：</pre></td></tr><tr><td data-num="38"></td><td><pre>QImage <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">scaledToHeight</span><span class="token punctuation">(</span><span class="token keyword">int</span> height<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>TransformationMode mode <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>FastTransformation<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>QImage <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">scaledToWidth</span><span class="token punctuation">(</span><span class="token keyword">int</span> width<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>TransformationMode mode <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>FastTransformation<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>（<span class="token number">2</span>）图像旋转。函数 <span class="token function">transformed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可以通过一个变换矩阵对图像进行任意的变换，其函数原型定义如下：</pre></td></tr><tr><td data-num="41"></td><td><pre>QImage <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">transformed</span><span class="token punctuation">(</span><span class="token keyword">const</span> QTransform <span class="token operator">&amp;</span>matrix<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>TransformationMode mode <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>FastTransformation<span class="token punctuation">)</span><span class="token number">10.4</span> 图像处理 <span class="token number">399</span></pre></td></tr><tr><td data-num="42"></td><td><pre>参数 matrix 是 QTransform 类型的变换矩阵。变换矩阵是一个 <span class="token number">3</span>×<span class="token number">3</span> 的矩阵，可以表示坐标系的平移、缩放、旋转等坐标变换运算关系。变换矩阵的具体原理和用法可以查看 QTransform 的帮助文档。</pre></td></tr><tr><td data-num="43"></td><td><pre>（<span class="token number">3</span>）图像镜像。函数 <span class="token function">mirror</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可以对图像进行镜像处理，该函数定义如下：</pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">mirror</span><span class="token punctuation">(</span><span class="token keyword">bool</span> horizontal <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> vertical <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>其中，参数 horizontal 表示是否进行水平镜像，参数 vertical 表示是否进行垂直镜像。函数没有返回值，直接修改原图像。还有一个函数 <span class="token function">mirrored</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可以对图像进行镜像处理，它返回处理后的图像副本，不修改原图像。</pre></td></tr><tr><td data-num="46"></td><td><pre>QImage <span class="token class-name">QImage</span><span class="token double-colon punctuation">::</span><span class="token function">mirrored</span><span class="token punctuation">(</span><span class="token keyword">bool</span> horizontal <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> vertical <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="例题与参考解答-2"><a class="markdownIt-Anchor" href="#例题与参考解答-2">#</a> 例题与参考解答</h3><h4 id="例题1qpainter-绘图"><a class="markdownIt-Anchor" href="#例题1qpainter-绘图">#</a> 例题 1：QPainter 绘图</h4><p><strong>问题</strong>：使用 <code>QPainter</code> 在窗口上绘制一个路径，该路径包含一条直线和一条贝塞尔曲线。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    QPainterPath path<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    path<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    path<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    path<span class="token punctuation">.</span><span class="token function">cubicTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="例题2坐标变换"><a class="markdownIt-Anchor" href="#例题2坐标变换">#</a> 例题 2：坐标变换</h4><p><strong>问题</strong>：在窗口上绘制一个经过平移、旋转和缩放的矩形，并在操作前后保存和恢复状态。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 保存状态</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 恢复状态</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="例题3图形视图架构"><a class="markdownIt-Anchor" href="#例题3图形视图架构">#</a> 例题 3：图形视图架构</h4><p><strong>问题</strong>：创建一个场景，并在其中添加一个矩形项，通过视图显示该场景，并将视图对齐到左上角。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QGraphicsScene <span class="token operator">*</span>scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>scene<span class="token operator">-></span><span class="token function">setSceneRect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>QGraphicsView <span class="token operator">*</span>view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsView</span><span class="token punctuation">(</span>scene<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>view<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignLeft <span class="token operator">|</span> Qt<span class="token double-colon punctuation">::</span>AlignTop<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>QGraphicsRectItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsRectItem</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>scene<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><img data-src="https://cdn.jsdelivr.net/gh/TV233/blogpic@main//img/image-20240611133328458.png" alt="image-20240611133328458"></p><p>平台集成 QPlatformIntegration 在 Windows、Linux 等操作系统上都有各自的具体实现。在 Windows 平台上还有 GDI 和 Direct2D 两种方式，平台集成对象保存在 QGuiApplicationPrivate 类的成员 platform_integration 中。QPlatformScreen 描述监视器，一台计算机可能连接多台监视器。当发现监视器时，Qt 会根据监视器信息生成 QPlatformScreen 类对象。在 Windows 平台上 QPlatformScreen 对象保存在 QWindowsIntegration 中的上下文 QWindowsContext 类对象 m_context 里面监视器管理器 QWindowsScreenManager 类的对象 m_screenManager，在监视器管理器中保存 QPlatformScreen 类型的监视器列表 .m_screens。同时根据得到的 QPlatformScreen 对象创建 Qscreen 实例，并存放在到 QWindowsScreenManager::m_screens 列表中。最后把 QSreen 对象存放到 QGuiApplicationPrivate::screen_list 列表中。</p><h2 id="界面组件复习笔记"><a class="markdownIt-Anchor" href="#界面组件复习笔记">#</a> 界面组件复习笔记</h2><h4 id="重点掌握内容日期时间数据-qtimer-qcombobox-qmainwindow-qaction-qlistwidget-qtreewidget-qtablewidget的使用"><a class="markdownIt-Anchor" href="#重点掌握内容日期时间数据-qtimer-qcombobox-qmainwindow-qaction-qlistwidget-qtreewidget-qtablewidget的使用">#</a> 重点掌握内容：日期时间数据、QTimer、QComboBox、QMainWindow、QAction、QListWidget、QTreeWidget、QTableWidget 的使用</h4><h3 id="目录-2"><a class="markdownIt-Anchor" href="#目录-2">#</a> 目录</h3><ol><li>界面组件概述</li><li>QString 字符串操作</li><li>QSpinBox</li><li>按钮组件</li><li>QSlider</li><li>日期时间数据</li><li>QTimer</li><li>QComboBox</li><li>QMainWindow 和 QAction</li><li>QListWidget</li><li>QTreeWidget</li><li>QTableWidget</li></ol><h3 id="1-界面组件概述"><a class="markdownIt-Anchor" href="#1-界面组件概述">#</a> 1. 界面组件概述</h3><ul><li>Qt 提供了丰富的界面组件，用于构建 GUI 应用程序。</li><li>每个组件都有其特定的属性和方法，可以通过信号和槽机制进行交互。</li></ul><h3 id="2-qstring-字符串操作"><a class="markdownIt-Anchor" href="#2-qstring-字符串操作">#</a> 2. QString 字符串操作</h3><ul><li><code>QString</code> 是 Qt 中用于处理字符串的类，提供了丰富的字符串操作函数。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>arg()</code> : 格式化字符串。</li><li><code>toUpper()/toLower()</code> : 转换大小写。</li><li><code>trimmed()</code> : 去除两端空白字符。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QString str <span class="token operator">=</span> <span class="token string">"Hello, %1!"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">;</span>  <span class="token comment">// 输出: Hello, World!</span></pre></td></tr></table></figure><h3 id="3-qspinbox"><a class="markdownIt-Anchor" href="#3-qspinbox">#</a> 3. QSpinBox</h3><ul><li><code>QSpinBox</code> 是一个用于输入和显示整数值的组件，带有上下按钮用于增加和减少值。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>setRange(int min, int max)</code> : 设置范围。</li><li><code>value()</code> : 获取当前值。</li><li><code>setValue(int value)</code> : 设置当前值。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QSpinBox <span class="token operator">*</span>spinBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSpinBox</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>spinBox<span class="token operator">-></span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>spinBox<span class="token operator">-></span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="4-按钮组件"><a class="markdownIt-Anchor" href="#4-按钮组件">#</a> 4. 按钮组件</h3><ul><li>常用的按钮组件包括 <code>QPushButton</code> 、 <code>QRadioButton</code> 和 <code>QCheckBox</code> 。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPushButton <span class="token operator">*</span>button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Click Me"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>button<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>handleButtonClick<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="5-qslider"><a class="markdownIt-Anchor" href="#5-qslider">#</a> 5. QSlider</h3><ul><li><code>QSlider</code> 是一个滑动条组件，用于选择一个范围内的值。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>setOrientation(Qt::Orientation)</code> : 设置方向（水平或垂直）。</li><li><code>setValue(int value)</code> : 设置当前值。</li><li><code>value()</code> : 获取当前值。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QSlider <span class="token operator">*</span>slider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSlider</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>slider<span class="token operator">-></span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>slider<span class="token operator">-></span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="6-日期时间数据"><a class="markdownIt-Anchor" href="#6-日期时间数据">#</a> 6. 日期时间数据</h3><ul><li>Qt 提供了 <code>QDate</code> 、 <code>QTime</code> 和 <code>QDateTime</code> 类用于处理日期和时间。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>currentDate()</code> : 获取当前日期。</li><li><code>currentTime()</code> : 获取当前时间。</li><li><code>toString()</code> : 将日期 / 时间转换为字符串。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QDate date <span class="token operator">=</span> <span class="token class-name">QDate</span><span class="token double-colon punctuation">::</span><span class="token function">currentDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QTime time <span class="token operator">=</span> <span class="token class-name">QTime</span><span class="token double-colon punctuation">::</span><span class="token function">currentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> time<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="7-qtimer"><a class="markdownIt-Anchor" href="#7-qtimer">#</a> 7. QTimer</h3><ul><li><code>QTimer</code> 类用于触发定时事件。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>start(int msec)</code> : 启动定时器，间隔时间为毫秒。</li><li><code>stop()</code> : 停止定时器。</li><li><code>timeout()</code> : 超时信号。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTimer <span class="token operator">*</span>timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTimer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>timer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTimer<span class="token double-colon punctuation">::</span>timeout<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>timer<span class="token operator">-></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 每秒更新一次</span></pre></td></tr></table></figure><h3 id="8-qcombobox"><a class="markdownIt-Anchor" href="#8-qcombobox">#</a> 8. QComboBox</h3><ul><li><code>QComboBox</code> 是一个组合框组件，提供下拉列表供用户选择。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>addItem(const QString &amp;text)</code> : 添加项。</li><li><code>currentIndex()</code> : 获取当前索引。</li><li><code>currentText()</code> : 获取当前文本。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QComboBox <span class="token operator">*</span>comboBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QComboBox</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QComboBox<span class="token double-colon punctuation">::</span>currentIndexChanged<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>handleSelectionChanged<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="9-qmainwindow-和-qaction"><a class="markdownIt-Anchor" href="#9-qmainwindow-和-qaction">#</a> 9. QMainWindow 和 QAction</h3><h4 id="91-qmainwindow"><a class="markdownIt-Anchor" href="#91-qmainwindow">#</a> 9.1 QMainWindow</h4><ul><li><code>QMainWindow</code> 是一个主窗口类，提供了一个主界面框架，包括菜单栏、工具栏、状态栏和中央小部件。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>setCentralWidget(QWidget *widget)</code> : 设置中央小部件。</li><li><code>statusBar()</code> : 获取状态栏。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QMainWindow <span class="token operator">*</span>mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QWidget <span class="token operator">*</span>centralWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>mainWindow<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>mainWindow<span class="token operator">-></span><span class="token function">setCentralWidget</span><span class="token punctuation">(</span>centralWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>mainWindow<span class="token operator">-></span><span class="token function">statusBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token string">"Ready"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h4 id="92-qaction"><a class="markdownIt-Anchor" href="#92-qaction">#</a> 9.2 QAction</h4><ul><li><code>QAction</code> 类用于表示菜单项、工具栏按钮等的动作。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>setText(const QString &amp;text)</code> : 设置文本。</li><li><code>setShortcut(const QKeySequence &amp;shortcut)</code> : 设置快捷键。</li><li><code>triggered()</code> : 触发信号。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QAction <span class="token operator">*</span>action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QAction</span><span class="token punctuation">(</span><span class="token string">"Open"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>action<span class="token operator">-></span><span class="token function">setShortcut</span><span class="token punctuation">(</span>QKeySequence<span class="token double-colon punctuation">::</span>Open<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QAction<span class="token double-colon punctuation">::</span>triggered<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>openFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>QMenu <span class="token operator">*</span>fileMenu <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">"File"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>fileMenu<span class="token operator">-></span><span class="token function">addAction</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="10-qlistwidget"><a class="markdownIt-Anchor" href="#10-qlistwidget">#</a> 10. QListWidget</h3><ul><li><code>QListWidget</code> 是一个用于显示列表项的组件，继承自 <code>QListView</code> 。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>addItem(const QString &amp;text)</code> : 添加项。</li><li><code>currentItem()</code> : 获取当前项。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QListWidget <span class="token operator">*</span>listWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QListWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Item 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Item 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>listWidget<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QListWidget<span class="token double-colon punctuation">::</span>itemClicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>handleItemClick<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="11-qtreewidget"><a class="markdownIt-Anchor" href="#11-qtreewidget">#</a> 11. QTreeWidget</h3><ul><li><code>QTreeWidget</code> 是一个用于显示树状结构数据的组件，继承自 <code>QTreeView</code> 。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>addTopLevelItem(QTreeWidgetItem *item)</code> : 添加顶级项。</li><li><code>currentItem()</code> : 获取当前项。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTreeWidget <span class="token operator">*</span>treeWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>QTreeWidgetItem <span class="token operator">*</span>item1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Item 1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>QTreeWidgetItem <span class="token operator">*</span>item2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>item1<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Child Item 1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>treeWidget<span class="token operator">-></span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span>item1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="12-qtablewidget"><a class="markdownIt-Anchor" href="#12-qtablewidget">#</a> 12. QTableWidget</h3><ul><li><code>QTableWidget</code> 是一个用于显示表格数据的组件，继承自 <code>QTableView</code> 。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>setRowCount(int rows)</code> : 设置行数。</li><li><code>setColumnCount(int columns)</code> : 设置列数。</li><li><code>setItem(int row, int column, QTableWidgetItem *item)</code> : 设置项。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTableWidget <span class="token operator">*</span>tableWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTableWidget</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="编程示例程序"><a class="markdownIt-Anchor" href="#编程示例程序">#</a> 编程示例程序</h3><h4 id="示例1qtimer-使用"><a class="markdownIt-Anchor" href="#示例1qtimer-使用">#</a> 示例 1：QTimer 使用</h4><p><strong>问题</strong>：创建一个窗口，包含一个定时器，每秒更新一次显示的文本。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTimer></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TimerWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">TimerWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Time: 0"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTimer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>timer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTimer<span class="token double-colon punctuation">::</span>timeout<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>TimerWidget<span class="token double-colon punctuation">::</span>updateTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        timer<span class="token operator">-></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">static</span> <span class="token keyword">int</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        time<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Time: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    QLabel <span class="token operator">*</span>label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    QTimer <span class="token operator">*</span>timer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    TimerWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="示例2qcombobox-使用"><a class="markdownIt-Anchor" href="#示例2qcombobox-使用">#</a> 示例 2：QComboBox 使用</h4><p><strong>问题</strong>：创建一个窗口，包含一个组合框和一个标签，根据组合框选择项更新标签内容。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QComboBox></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ComboBoxWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">ComboBoxWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        comboBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QComboBox</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Please select an option"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">,</span> <span class="token class-name">QOverload</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token double-colon punctuation">::</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>QComboBox<span class="token double-colon punctuation">::</span>currentIndexChanged<span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ComboBoxWidget<span class="token double-colon punctuation">::</span>updateLabel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateLabel</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Selected: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>comboBox<span class="token operator">-></span><span class="token function">itemText</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    QComboBox <span class="token operator">*</span>comboBox<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    QLabel <span class="token operator">*</span>label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    ComboBoxWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="示例3qmainwindow-和-qaction-使用"><a class="markdownIt-Anchor" href="#示例3qmainwindow-和-qaction-使用">#</a> 示例 3：QMainWindow 和 QAction 使用</h4><p><strong>问题</strong>：创建一个主窗口，包含一个菜单项 “Open”，点击该菜单项时显示消息框。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAction></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMenuBar></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMessageBox></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        QAction <span class="token operator">*</span>openAction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QAction</span><span class="token punctuation">(</span><span class="token string">"Open"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        openAction<span class="token operator">-></span><span class="token function">setShortcut</span><span class="token punctuation">(</span>QKeySequence<span class="token double-colon punctuation">::</span>Open<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>openAction<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QAction<span class="token double-colon punctuation">::</span>triggered<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MainWindow<span class="token double-colon punctuation">::</span>openFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>        QMenu <span class="token operator">*</span>fileMenu <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">"File"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        fileMenu<span class="token operator">-></span><span class="token function">addAction</span><span class="token punctuation">(</span>openAction<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">openFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Open"</span><span class="token punctuation">,</span> <span class="token string">"Open action triggered"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    MainWindow mainWindow<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    mainWindow<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="示例4qlistwidget-使用"><a class="markdownIt-Anchor" href="#示例4qlistwidget-使用">#</a> 示例 4：QListWidget 使用</h4><p><strong>问题</strong>：创建一个窗口，包含一个列表框和一个标签，点击列表项时更新标签内容。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QListWidget></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ListWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">ListWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        listWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QListWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Item 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Item 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Item 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Please select an item"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>listWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>listWidget<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QListWidget<span class="token double-colon punctuation">::</span>itemClicked<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ListWidget<span class="token double-colon punctuation">::</span>updateLabel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateLabel</span><span class="token punctuation">(</span>QListWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Selected: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>item<span class="token operator">-></span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    QListWidget <span class="token operator">*</span>listWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    QLabel <span class="token operator">*</span>label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    ListWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="示例5qtreewidget-使用"><a class="markdownIt-Anchor" href="#示例5qtreewidget-使用">#</a> 示例 5：QTreeWidget 使用</h4><p><strong>问题</strong>：创建一个窗口，包含一个树控件和一个标签，点击树项时更新标签内容。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidget></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TreeWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">TreeWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        treeWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        treeWidget<span class="token operator">-></span><span class="token function">setHeaderLabels</span><span class="token punctuation">(</span><span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Tree Items"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        QTreeWidgetItem <span class="token operator">*</span>item1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Item 1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>item1<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Child Item 1.1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>item1<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Child Item 1.2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        QTreeWidgetItem <span class="token operator">*</span>item2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Item 2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>item2<span class="token punctuation">,</span> <span class="token function">QStringList</span><span class="token punctuation">(</span><span class="token string">"Child Item 2.1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>        label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Please select an item"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTreeWidget<span class="token double-colon punctuation">::</span>itemClicked<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>TreeWidget<span class="token double-colon punctuation">::</span>updateLabel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateLabel</span><span class="token punctuation">(</span>QTreeWidgetItem <span class="token operator">*</span>item<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Selected: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>item<span class="token operator">-></span><span class="token function">text</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    QTreeWidget <span class="token operator">*</span>treeWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    QLabel <span class="token operator">*</span>label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    TreeWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="示例6qtablewidget-使用"><a class="markdownIt-Anchor" href="#示例6qtablewidget-使用">#</a> 示例 6：QTableWidget 使用</h4><p><strong>问题</strong>：创建一个窗口，包含一个表格控件，显示 3 行 3 列的内容，并点击单元格时更新标签内容。</p><p><strong>解答</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTableWidget></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">TableWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">TableWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        tableWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTableWidget</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 0,2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 1,0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 1,1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 1,2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 2,0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 2,1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        tableWidget<span class="token operator">-></span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token function">QTableWidgetItem</span><span class="token punctuation">(</span><span class="token string">"Cell 2,2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">"Please select a cell"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>tableWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>tableWidget<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTableWidget<span class="token double-colon punctuation">::</span>cellClicked<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>TableWidget<span class="token double-colon punctuation">::</span>updateLabel<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">updateLabel</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        QTableWidgetItem <span class="token operator">*</span>item <span class="token operator">=</span> tableWidget<span class="token operator">-></span><span class="token function">item</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> column<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        label<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">"Selected: %1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>item<span class="token operator">-></span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    QTableWidget <span class="token operator">*</span>tableWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    QLabel <span class="token operator">*</span>label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    TableWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>通过以上复习笔记和编程示例，您应能掌握 Qt 界面组件的基本使用方法，并能运用这些知识开发实际的应用程序。</p><h2 id="网络编程复习笔记"><a class="markdownIt-Anchor" href="#网络编程复习笔记">#</a> 网络编程复习笔记</h2><h4 id="重点掌握内容qhostinfo-qtcpserver-qtcpsocket-qudpsocket-的使用-http应用程序编写"><a class="markdownIt-Anchor" href="#重点掌握内容qhostinfo-qtcpserver-qtcpsocket-qudpsocket-的使用-http应用程序编写">#</a> 重点掌握内容：QHostInfo、QTcpServer、QTcpSocket、QUdpSocket 的使用、HTTP 应用程序编写</h4><h3 id="目录-3"><a class="markdownIt-Anchor" href="#目录-3">#</a> 目录</h3><ol><li>主机信息查询</li><li>TCP 通信</li><li>UDP 通信</li><li>基于 HTTP 的网络应用程序</li></ol><h3 id="1-主机信息查询"><a class="markdownIt-Anchor" href="#1-主机信息查询">#</a> 1. 主机信息查询</h3><h4 id="11-qhostinfo"><a class="markdownIt-Anchor" href="#11-qhostinfo">#</a> 1.1 QHostInfo</h4><ul><li><p><code>QHostInfo</code> 类用于查询主机名和 IP 地址。</p></li><li><table><thead><tr><th><strong>公共函数</strong></th><th></th></tr></thead><tbody><tr><td>Qlist<qhostaddress>addresses()</qhostaddress></td><td>返回与 hostName () 对应主机关联的 IP 地址列表</td></tr><tr><td>HostInfoError error()</td><td>如果主机查找失败，返回失败类型</td></tr><tr><td>QString errorString()</td><td>如果主机查找失败，返回错误描述字符串</td></tr><tr><td>QString hostName()</td><td>返回通过 IP 地址查找到的主机名公共函数</td></tr><tr><td>int lookupId()</td><td>返回本次查找到的 ID</td></tr><tr><td><strong>静态函数</strong></td><td></td></tr><tr><td>void abortHostLookup(int id)</td><td>中断主机查找</td></tr><tr><td>QHostInfo fromName(QString &amp;name)</td><td>返回指定主机名的 IP 地址</td></tr><tr><td>QString localDomainName()</td><td>返回本机域名系统（domain name system，DNS）域名</td></tr><tr><td>QString localHostName()</td><td>返回本机主机名</td></tr><tr><td>int lookupHost(QString &amp;name, QObject *receiver, char *member)</td><td>以异步方式查找主机的 IP 地址，返回一个表示本次查找的 ID，可用作 abortHostLookup () 函数的参数</td></tr></tbody></table></li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHostInfo></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    QHostInfo info <span class="token operator">=</span> <span class="token class-name">QHostInfo</span><span class="token double-colon punctuation">::</span><span class="token function">fromName</span><span class="token punctuation">(</span><span class="token string">"www.example.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">foreach</span> <span class="token punctuation">(</span><span class="token keyword">const</span> QHostAddress <span class="token operator">&amp;</span>address<span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">addresses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="2-tcp通信"><a class="markdownIt-Anchor" href="#2-tcp通信">#</a> 2. TCP 通信</h3><h4 id="21-qtcpserver"><a class="markdownIt-Anchor" href="#21-qtcpserver">#</a> 2.1 QTcpServer</h4><ul><li><code>QTcpServer</code> 类用于创建 TCP 服务器。</li></ul><table><thead><tr><th><strong>函数</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>公共函数</td><td></td></tr><tr><td>void close()</td><td>关闭服务器，停止网络监听</td></tr><tr><td>bool listen()</td><td>在设置的 IP 地址和端口上开始监听，若成功就返回 true</td></tr><tr><td>bool isListening()</td><td>返回 true 表示服务器处于监听状态</td></tr><tr><td>QTcpSocket *nextPendingConnection()</td><td>返回下一个等待接入的连接</td></tr><tr><td>QHostAddress serverAddress()</td><td>如果服务器处于监听状态，就返回服务器地址</td></tr><tr><td>quint16 serverPort()</td><td>如果服务器处于监听状态，就返回服务器监听端口</td></tr><tr><td>bool waitForNewConnection()</td><td>以阻塞方式等待新的连接</td></tr></tbody><tbody><tr><td><strong>函数</strong></td><td><strong>功能</strong></td></tr><tr><td>----------------------------</td><td>------------------------------------------------------------</td></tr><tr><td>信号</td><td></td></tr><tr><td>void acceptError()</td><td>当接收一个新的连接发生错误时，此信号被发射</td></tr><tr><td>void newConnection()</td><td>当有新的连接时，此信号被发射</td></tr><tr><td>保护函数</td><td></td></tr><tr><td>void incomingConnection()</td><td>当有一个新的连接可用时，QTcpServer 内部调用此函数，创建一个 QTcpSocket 对象，将其添加到内部可用新连接列表，然后发射 newConnection () 信号</td></tr><tr><td>void addPendingConnection()</td><td>由 incomingConnection () 调用，将创建的 QTcpSocket 添加到内部可用新连接列表</td></tr></tbody></table><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpServer></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpSocket></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyServer</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QTcpServer</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">MyServer</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QTcpServer</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">listen</span><span class="token punctuation">(</span>QHostAddress<span class="token double-colon punctuation">::</span>Any<span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">incomingConnection</span><span class="token punctuation">(</span>qintptr socketDescriptor<span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        QTcpSocket <span class="token operator">*</span>socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTcpSocket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        socket<span class="token operator">-></span><span class="token function">setSocketDescriptor</span><span class="token punctuation">(</span>socketDescriptor<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyServer<span class="token double-colon punctuation">::</span>readData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>disconnected<span class="token punctuation">,</span> socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>deleteLater<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        QTcpSocket <span class="token operator">*</span>socket <span class="token operator">=</span> <span class="token generic-function"><span class="token function">qobject_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QTcpSocket <span class="token operator">*</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> socket<span class="token operator">-></span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            socket<span class="token operator">-></span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Hello Client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    MyServer server<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h4 id="22-qtcpsocket"><a class="markdownIt-Anchor" href="#22-qtcpsocket">#</a> 2.2 QTcpSocket</h4><ul><li><code>QTcpSocket</code> 类用于创建 TCP 客户端或处理 TCP 连接。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>connectToHost(const QString &amp;hostName, quint16 port)</code> : 连接到指定主机和端口。</li><li><code>write(const QByteArray &amp;data)</code> : 发送数据。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpSocket></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyClient</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">MyClient</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        socket<span class="token punctuation">.</span><span class="token function">connectToHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyClient<span class="token double-colon punctuation">::</span>readData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> socket<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    QTcpSocket socket<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    MyClient client<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="3-udp通信"><a class="markdownIt-Anchor" href="#3-udp通信">#</a> 3. UDP 通信</h3><h4 id="31-qudpsocket"><a class="markdownIt-Anchor" href="#31-qudpsocket">#</a> 3.1 QUdpSocket</h4><ul><li><code>QUdpSocket</code> 类用于创建 UDP 套接字。</li></ul><table><thead><tr><th><strong>函数</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>bool bind( )</td><td>为 UDP 通信绑定一个端口</td></tr><tr><td>qint64 writeDatagram()</td><td>向目标地址和端口的 UDP 客户端发送数据报，返回成功发送的字节数</td></tr><tr><td>bool hasPendingDatagrams()</td><td>当至少有一个数据报需要读取时，返回 true</td></tr><tr><td>qint64 pendingDatagramSize()</td><td>返回第一个待读取的数据报的大小</td></tr><tr><td>qint64 readDatagram()</td><td>读取一个数据报，返回成功读取的数据报的字节数</td></tr><tr><td>bool joinMulticastGroup()</td><td>加入一个多播组</td></tr><tr><td>bool leaveMulticastGroup()</td><td>离开一个多播组</td></tr></tbody></table><ul><li><code>bind(const QHostAddress &amp;address, quint16 port)</code> : 绑定到指定地址和端口。</li><li><code>writeDatagram(const QByteArray &amp;data, const QHostAddress &amp;address, quint16 port)</code> : 发送数据报。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QUdpSocket></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyUdp</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">MyUdp</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        udpSocket<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>udpSocket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QUdpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyUdp<span class="token double-colon punctuation">::</span>readData<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">sendData</span><span class="token punctuation">(</span><span class="token keyword">const</span> QByteArray <span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token keyword">const</span> QHostAddress <span class="token operator">&amp;</span>address<span class="token punctuation">,</span> quint16 port<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        udpSocket<span class="token punctuation">.</span><span class="token function">writeDatagram</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> address<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>udpSocket<span class="token punctuation">.</span><span class="token function">hasPendingDatagrams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            QByteArray datagram<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            datagram<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>udpSocket<span class="token punctuation">.</span><span class="token function">pendingDatagramSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            QHostAddress sender<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            quint16 senderPort<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            udpSocket<span class="token punctuation">.</span><span class="token function">readDatagram</span><span class="token punctuation">(</span>datagram<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> datagram<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>sender<span class="token punctuation">,</span> <span class="token operator">&amp;</span>senderPort<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Received:"</span> <span class="token operator">&lt;&lt;</span> datagram<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    QUdpSocket udpSocket<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    QCoreApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    MyUdp udp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    udp<span class="token punctuation">.</span><span class="token function">sendData</span><span class="token punctuation">(</span><span class="token string">"Hello UDP"</span><span class="token punctuation">,</span> <span class="token function">QHostAddress</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="4-基于http的网络应用程序"><a class="markdownIt-Anchor" href="#4-基于http的网络应用程序">#</a> 4. 基于 HTTP 的网络应用程序</h3><h4 id="41-qnetworkaccessmanager"><a class="markdownIt-Anchor" href="#41-qnetworkaccessmanager">#</a> 4.1 QNetworkAccessManager</h4><ul><li><code>QNetworkAccessManager</code> 类用于发送网络请求和接收响应。</li></ul><p><strong>常用方法</strong>：</p><ul><li><code>get(const QNetworkRequest &amp;request)</code> : 发送 GET 请求。</li><li><code>post(const QNetworkRequest &amp;request, const QByteArray &amp;data)</code> : 发送 POST 请求。</li></ul><p><strong>示例代码</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//“下载” 按钮，开始下载 </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_btnDownload_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    QString urlSpec<span class="token operator">=</span> ui<span class="token operator">-></span>editURL<span class="token operator">-></span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trimmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>urlSpec<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    	<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span><span class="token string">"请指定需要下载的 URL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>   	 	<span class="token keyword">return</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span>	</pre></td></tr><tr><td data-num="8"></td><td><pre>    QUrl newUrl<span class="token operator">=</span> <span class="token class-name">QUrl</span><span class="token double-colon punctuation">::</span><span class="token function">fromUserInput</span><span class="token punctuation">(</span>urlSpec<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//URL </span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newUrl<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>        QString info<span class="token operator">=</span> <span class="token string">"无效 URL:"</span><span class="token operator">+</span>urlSpec<span class="token operator">+</span><span class="token string">"\n 错误信息:"</span><span class="token operator">+</span>newUrl<span class="token punctuation">.</span><span class="token function">errorString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>    QString tempDir<span class="token operator">=</span> ui<span class="token operator">-></span>editPath<span class="token operator">-></span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trimmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 临时目录 </span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tempDir<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>    	<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span> <span class="token string">"请指定保存下载文件的目录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>    	<span class="token keyword">return</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="19"></td><td><pre>    QString fullFileName<span class="token operator">=</span> tempDir<span class="token operator">+</span>newUrl<span class="token punctuation">.</span><span class="token function">fileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 文件名 </span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">QFile</span><span class="token double-colon punctuation">::</span><span class="token function">exists</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">)</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="21"></td><td><pre>    	<span class="token class-name">QFile</span><span class="token double-colon punctuation">::</span><span class="token function">remove</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    downloadedFile<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QFile</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建临时文件 </span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>downloadedFile<span class="token operator">-></span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="24"></td><td><pre>    	<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"错误"</span><span class="token punctuation">,</span><span class="token string">"临时文件打开错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="25"></td><td><pre>    	<span class="token keyword">return</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="27"></td><td><pre>	ui<span class="token operator">-></span>btnDownload<span class="token operator">-></span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 发送网络请求，创建网络响应 </span></pre></td></tr><tr><td data-num="30"></td><td><pre>    reply<span class="token operator">=</span> networkManager<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">QNetworkRequest</span><span class="token punctuation">(</span>newUrl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>reply<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">readyRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">do_readyRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>reply<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">downloadProgress</span><span class="token punctuation">(</span>qint64<span class="token punctuation">,</span>qint64<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">do_downloadProgress</span><span class="token punctuation">(</span>qint64<span class="token punctuation">,</span>qint64<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>reply<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">do_finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">do_readyRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 读取下载的数据 </span></pre></td></tr><tr><td data-num="37"></td><td><pre>	downloadedFile<span class="token operator">-></span><span class="token function">write</span><span class="token punctuation">(</span>reply<span class="token operator">-></span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 下载进度</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">do_downloadProgress</span><span class="token punctuation">(</span>qint64 bytesRead<span class="token punctuation">,</span> qint64 totalBytes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    ui<span class="token operator">-></span>progressBar<span class="token operator">-></span><span class="token function">setMaximum</span><span class="token punctuation">(</span>totalBytes<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="42"></td><td><pre>    ui<span class="token operator">-></span>progressBar<span class="token operator">-></span><span class="token function">setValue</span><span class="token punctuation">(</span>bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">do_finished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>			<span class="token comment">// 网络响应结束 </span></pre></td></tr><tr><td data-num="46"></td><td><pre>    QFileInfo <span class="token function">fileInfo</span><span class="token punctuation">(</span>downloadedFile<span class="token operator">-></span><span class="token function">fileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取下载的文件的文件名 </span></pre></td></tr><tr><td data-num="47"></td><td><pre>    downloadedFile<span class="token operator">-></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token keyword">delete</span> downloadedFile<span class="token punctuation">;</span> 			<span class="token comment">// 删除临时文件对象 </span></pre></td></tr><tr><td data-num="49"></td><td><pre>    reply<span class="token operator">-></span><span class="token function">deleteLater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">// 由主事件循环删除此对象 </span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ui<span class="token operator">-></span>chkBoxOpen<span class="token operator">-></span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 		<span class="token comment">// 打开下载的文件 QDesktopServices::openUrl (QUrl::fromLocalFile (fileInfo.absoluteFilePath ())); </span></pre></td></tr><tr><td data-num="51"></td><td><pre>    ui<span class="token operator">-></span>btnDownload<span class="token operator">-></span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token comment">// 在缓冲区有新下载的数据等待读取时，QNetworkReply 会发射 readyRead () 信号，其关联的槽函数 do_readyRead () 里读取下载缓冲区中的数据并将其写入临时文件。</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token comment">// 信号 downloadProgress () 表示网络操作进度，传递 bytesRead 和 totalBytes 两个参数，表示已读取字节数和总的字节数，其关联的槽函数 do_downloadProgress () 里用这两个参数显示下载进度。 </span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token comment">// 信号 finished () 在下载结束后被发射，槽函数 do_finished () 的功能是关闭临时文件，删除文件对象 downloadedFile 和网络响应对象 reply。然后用静态函数 QDesktopServices::openUrl () 调用默认的应用软件打开下载的文件，例如下载一个 PDF 文件，会自动用系统的默认软件打开此文件。</span></pre></td></tr></table></figure><h2 id="例题"><a class="markdownIt-Anchor" href="#例题">#</a> 例题</h2><h3 id="一-c面向对象程序设计"><a class="markdownIt-Anchor" href="#一-c面向对象程序设计">#</a> 一、C++ 面向对象程序设计</h3><h4 id="简述题"><a class="markdownIt-Anchor" href="#简述题">#</a> 简述题</h4><ol><li><strong>简述对象树的创建和析构顺序。</strong><ul><li><strong>创建顺序</strong>：对象树的创建是从父对象开始的，先创建根对象，然后递归创建子对象。</li><li><strong>析构顺序</strong>：对象树的析构顺序是从子对象开始的，先递归销毁子对象，最后销毁根对象。</li></ul></li><li><strong>描述构造函数和析构函数的作用及其使用场景。</strong><ul><li><strong>构造函数</strong>：用于初始化对象，分配资源等。使用场景包括对象创建时的初始化操作。</li><li><strong>析构函数</strong>：用于清理资源，释放内存等。使用场景包括对象销毁时的清理操作。</li></ul></li><li><strong>解释静态成员与普通成员的区别。</strong><ul><li><strong>静态成员</strong>：属于类本身，而不是某个对象，所有对象共享同一个静态成员。使用 <code>className::memberName</code> 访问。</li><li><strong>普通成员</strong>：属于对象，每个对象都有自己独立的普通成员。</li></ul></li><li><strong>说明类的继承与派生的基本概念。</strong><ul><li><strong>继承</strong>：一个类（子类）从另一个类（父类）获取属性和行为的机制。子类继承父类的所有公有和保护成员。</li><li><strong>派生</strong>：从已有类（基类）创建新类（派生类）的过程。</li></ul></li><li><strong>简述多态性的实现方式及其优点。</strong><ul><li><strong>实现方式</strong>：通过虚函数和继承实现。基类声明虚函数，子类重写虚函数，使用基类指针或引用调用时，调用的是子类的实现。</li><li><strong>优点</strong>：提高代码的灵活性和可扩展性，允许在不同类中实现相同接口的不同功能。</li></ul></li></ol><h4 id="分析题"><a class="markdownIt-Anchor" href="#分析题">#</a> 分析题</h4><ol><li><p>给出下列程序的对象的析构顺序，写出 <code>main()</code> 函数运行后的输出结果：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">myInt</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">myInt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">;</span> <span class="token operator">*</span>p<span class="token operator">=</span>x<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">myInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">"~myInt:"</span><span class="token operator">&lt;&lt;</span><span class="token operator">*</span>p<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> <span class="token keyword">delete</span> p<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>o<span class="token punctuation">,</span>myInt <span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token keyword">return</span> o<span class="token operator">&lt;&lt;</span><span class="token operator">*</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    myInt xs<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token function">myInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">myInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">myInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        cout<span class="token operator">&lt;&lt;</span>xs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>参考答案：</p><pre><code>1 2 3
~myInt:3
~myInt:2
~myInt:1
</code></pre></li></ol><h4 id="编程题"><a class="markdownIt-Anchor" href="#编程题">#</a> 编程题</h4><ol><li><p>补充 <code>myMatrix</code> 类的拷贝构造函数和运算符 <code>()</code> 重载函数的定义，使之能满足以下 <code>main()</code> 函数的功能需求：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">myMatrix</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">int</span> rows<span class="token punctuation">,</span> cols<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">myMatrix</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token operator">~</span><span class="token function">myMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">myMatrix</span><span class="token punctuation">(</span><span class="token keyword">const</span> myMatrix <span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 其他成员函数</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    myMatrix <span class="token function">mat1</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">mat1</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">mat1</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">mat1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token function">mat1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    myMatrix mat2 <span class="token operator">=</span> mat1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">mat2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h3 id="二-对象模型"><a class="markdownIt-Anchor" href="#二-对象模型">#</a> 二、对象模型</h3><h4 id="简述题-2"><a class="markdownIt-Anchor" href="#简述题-2">#</a> 简述题</h4><ol><li>简述对象树的原理和实现、创建和析构顺序。</li><li>解释动态属性的原理与实现。</li><li>描述信号与槽的实现原理和工作机制。</li></ol><h4 id="分析题-2"><a class="markdownIt-Anchor" href="#分析题-2">#</a> 分析题</h4><ol><li>分析并解释 <code>QMetaObject</code> 类的主要接口函数的功能。</li><li>解释运行时类型信息的作用及其实现方式。</li></ol><h4 id="编程题-2"><a class="markdownIt-Anchor" href="#编程题-2">#</a> 编程题</h4><ol><li>编写一个包含自定义信号与槽的 <code>QObject</code> 派生类，并在 <code>main()</code> 函数中演示其使用。</li></ol><h3 id="三-事件系统"><a class="markdownIt-Anchor" href="#三-事件系统">#</a> 三、事件系统</h3><h4 id="简述题-3"><a class="markdownIt-Anchor" href="#简述题-3">#</a> 简述题</h4><ol><li><p><strong>简述 Qt 中的事件系统的工作原理。</strong></p><ul><li>Qt 事件系统通过事件对象和事件循环处理事件。事件对象继承自 <code>QEvent</code> ，事件循环由 <code>QCoreApplication</code> 管理。对象接收事件并调用其 <code>event()</code> 方法进行处理。</li></ul><p><strong>解释事件与信号的区别和联系。</strong></p><ul><li><strong>区别</strong>：事件是低级别的机制，用于直接处理用户输入、窗口系统事件等。信号是高级别的机制，用于对象之间的通信。</li><li><strong>联系</strong>：信号与槽可以间接处理事件，通过发出信号通知其他对象事件的发生。</li></ul><p><strong>描述事件过滤器的工作原理和使用方法。</strong></p><ul><li><strong>工作原理</strong>：事件过滤器是一个对象，可以拦截和处理其他对象的事件。通过 <code>installEventFilter</code> 安装事件过滤器，拦截的事件传递给 <code>eventFilter</code> 方法处理。</li><li><strong>使用方法</strong>：创建一个继承自 <code>QObject</code> 的类，重写 <code>eventFilter</code> 方法，然后使用 <code>installEventFilter</code> 安装事件过滤器。</li></ul></li></ol><h4 id="分析题-3"><a class="markdownIt-Anchor" href="#分析题-3">#</a> 分析题</h4><ol><li><p>分析以下代码的功能，解释事件过滤器的作用：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">bool</span> <span class="token function">eventFilter</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>obj<span class="token punctuation">,</span> QEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    MyWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">installEventFilter</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>widget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><p>作用：事件过滤器用于拦截并处理特定对象的事件。在上例中，MyWidget 对象的 eventFilter 方法拦截并处理键盘事件，并输出按键值。</p><h4 id="编程题-3"><a class="markdownIt-Anchor" href="#编程题-3">#</a> 编程题</h4><ol><li><p>实现一个自定义事件过滤器，用于在特定条件下拦截和处理键盘事件。</p><pre><code class="language-c++">class KeyPressFilter : public QObject &#123;
    Q_OBJECT
protected:
    bool eventFilter(QObject *obj, QEvent *event) override &#123;
        if (event-&gt;type() == QEvent::KeyPress) &#123;
            QKeyEvent *keyEvent = static_cast&lt;QKeyEvent*&gt;(event);
            if (keyEvent-&gt;key() == Qt::Key_Escape) &#123;
                qDebug() &lt;&lt; &quot;Escape key pressed!&quot;;
                return true; // 事件已处理
            &#125;
        &#125;
        return QObject::eventFilter(obj, event); // 传递给基类处理
    &#125;
&#125;;

int main() &#123;
    QApplication app(argc, argv);
    QWidget widget;
    KeyPressFilter filter;
    widget.installEventFilter(&amp;filter);
    widget.show();
    return app.exec();
&#125;
</code></pre></li></ol><h3 id="四-多线程"><a class="markdownIt-Anchor" href="#四-多线程">#</a> 四、多线程</h3><h4 id="简述题-4"><a class="markdownIt-Anchor" href="#简述题-4">#</a> 简述题</h4><ol><li><p><strong>简述 Qt 中线程同步的各种实现方式及其特点。</strong></p><ul><li><strong>互斥量（QMutex）</strong>：用于保护临界区，避免多个线程同时访问共享资源。</li><li><strong>互斥锁（QMutexLocker）</strong>：自动加锁和解锁互斥量，简化代码。</li><li><strong>读写锁（QReadWriteLock）</strong>：允许多个线程同时读，但写操作是独占的。</li><li><strong>等待条件（QWaitCondition）</strong>：线程可以等待特定条件的发生，再继续执行。</li><li><strong>信号量（QSemaphore）</strong>：用于控制访问资源的线程数量。</li></ul><p><strong>解释 <code>QThread</code> 的使用方法和注意事项。</strong></p><ul><li><strong>使用方法</strong>：创建一个继承自 <code>QThread</code> 的类，重写 <code>run</code> 方法，然后调用 <code>start</code> 方法启动线程。</li><li><strong>注意事项</strong>：不要直接操作 GUI 元素，线程安全的资源共享，避免死锁和竞争条件。</li></ul></li></ol><h4 id="分析题-4"><a class="markdownIt-Anchor" href="#分析题-4">#</a> 分析题</h4><ol><li><p>分析以下代码段，解释互斥量和条件变量的使用方式：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Worker</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    QMutex mutex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    QWaitCondition condition<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">bool</span> ready<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>ready<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            condition<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 执行任务</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setReady</span><span class="token punctuation">(</span><span class="token keyword">bool</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        QMutexLocker <span class="token function">locker</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        ready <span class="token operator">=</span> value<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        condition<span class="token punctuation">.</span><span class="token function">wakeOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><p><strong>解释</strong>： <code>process</code> 方法使用 <code>QMutexLocker</code> 锁定互斥量，如果 <code>ready</code> 为假，线程进入等待状态。 <code>setReady</code> 方法修改 <code>ready</code> 状态并唤醒一个等待的线程。此方法确保了线程安全和同步。</p><h4 id="编程题-4"><a class="markdownIt-Anchor" href="#编程题-4">#</a> 编程题</h4><ol><li><p>实现一个多线程程序，其中主线程创建多个子线程，并通过 <code>QSemaphore</code> 控制子线程的执行顺序。</p><pre><code class="language-c++">class Worker : public QObject &#123;
    Q_OBJECT
public slots:
    void doWork() &#123;
        qDebug() &lt;&lt; &quot;Thread&quot; &lt;&lt; QThread::currentThread() &lt;&lt; &quot;is running.&quot;;
    &#125;
&#125;;

int main() &#123;
    QCoreApplication app(argc, argv);

    QSemaphore semaphore(1); // 初始值为1
    Worker worker;
    QThread thread1, thread2, thread3;

    QObject::connect(&amp;thread1, &amp;QThread::started, [&amp;]() &#123;
        semaphore.acquire();
        worker.doWork();
        semaphore.release();
        thread1.quit();
    &#125;);
    QObject::connect(&amp;thread2, &amp;QThread::started, [&amp;]() &#123;
        semaphore.acquire();
        worker.doWork();
        semaphore.release();
        thread2.quit();
    &#125;);
    QObject::connect(&amp;thread3, &amp;QThread::started, [&amp;]() &#123;
        semaphore.acquire();
        worker.doWork();
        semaphore.release();
        thread3.quit();
    &#125;);

    worker.moveToThread(&amp;thread1);
    worker.moveToThread(&amp;thread2);
    worker.moveToThread(&amp;thread3);

    thread1.start();
    thread2.start();
    thread3.start();

    thread1.wait();
    thread2.wait();
    thread3.wait();

    return app.exec();
&#125;
</code></pre></li></ol><h3 id="五-绘图"><a class="markdownIt-Anchor" href="#五-绘图">#</a> 五、绘图</h3><h4 id="简述题-5"><a class="markdownIt-Anchor" href="#简述题-5">#</a> 简述题</h4><ol><li><p><strong>简述 <code>QPainter</code> 的基本使用方法。</strong></p><ul><li>创建 <code>QPainter</code> 对象，指定绘图设备（如 <code>QWidget</code> 或 <code>QPixmap</code> ）。</li><li>使用绘图命令（如 <code>drawRect</code> 、 <code>drawLine</code> ）绘制图形。</li><li>调用 <code>end</code> 方法结束绘图。</li></ul><p><strong>解释坐标系统与坐标变换的概念和实现方式。</strong></p><ul><li><strong>坐标系统</strong>：用于定义绘图的坐标范围。Qt 中使用物理坐标（窗口坐标）和逻辑坐标（场景坐标）。</li><li><strong>坐标变换</strong>：改变绘图的坐标系，包括平移、旋转和缩放。使用 <code>translate</code> 、 <code>rotate</code> 、 <code>scale</code> 方法实现。</li></ul><p><strong>描述图形视图架构的组成和作用。</strong></p><ul><li><strong>组成</strong>：图形视图架构由 <code>QGraphicsScene</code> 、 <code>QGraphicsView</code> 和 <code>QGraphicsItem</code> 组成。</li><li><strong>作用</strong>：用于管理和显示大量的图形项，提供丰富的交互和变换功能。</li></ul></li></ol><h4 id="分析题-5"><a class="markdownIt-Anchor" href="#分析题-5">#</a> 分析题</h4><ol><li><p>分析以下代码段，解释坐标变换的作用：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ol><p><strong>解释</strong>：此代码先将坐标系平移 50 像素，然后旋转 45 度，再按比例 2 缩放。绘制的矩形最终会在变换后的坐标系中显示，位置和大小都被调整。</p><h4 id="编程题-5"><a class="markdownIt-Anchor" href="#编程题-5">#</a> 编程题</h4><ol><li><p>编写一个程序，使用 <code>QPainterPath</code> 绘制复杂图形，并演示平移、旋转和缩放的效果。</p><pre><code class="language-c++">void MyWidget::paintEvent(QPaintEvent *event) &#123;
    QPainter painter(this);
    QPainterPath path;
    path.moveTo(50, 50);
    path.lineTo(150, 50);
    path.cubicTo(100, 0, 200, 100, 150, 150);
    path.lineTo(50, 150);
    path.closeSubpath();
    painter.fillPath(path, Qt::blue);
&#125;
</code></pre><h3 id="六-界面组件"><a class="markdownIt-Anchor" href="#六-界面组件">#</a> 六、界面组件</h3><h4 id="简述题-6"><a class="markdownIt-Anchor" href="#简述题-6">#</a> 简述题</h4><ol><li><p><strong>简述日期时间数据在 Qt 中的使用方法。</strong></p><ul><li><p>在 Qt 中，日期和时间数据可以通过 <code>QDate</code> , <code>QTime</code> , 和 <code>QDateTime</code> 类来处理。</p><ul><li><p><strong>QDate</strong>：用于表示和处理日期。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QDate date <span class="token operator">=</span> <span class="token class-name">QDate</span><span class="token double-colon punctuation">::</span><span class="token function">currentDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p><strong>QTime</strong>：用于表示和处理时间。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTime time <span class="token operator">=</span> <span class="token class-name">QTime</span><span class="token double-colon punctuation">::</span><span class="token function">currentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> time<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p><strong>QDateTime</strong>：用于表示和处理日期和时间的组合。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QDateTime dateTime <span class="token operator">=</span> <span class="token class-name">QDateTime</span><span class="token double-colon punctuation">::</span><span class="token function">currentDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> dateTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li><li><p><code>QDateTimeEdit</code> 组件可以在界面中方便地输入和显示日期时间。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QDateTimeEdit <span class="token operator">*</span>dateTimeEdit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QDateTimeEdit</span><span class="token punctuation">(</span><span class="token class-name">QDateTime</span><span class="token double-colon punctuation">::</span><span class="token function">currentDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li><li><p><strong>解释 <code>QTimer</code> 的基本用法。</strong></p><ul><li><p><code>QTimer</code> 用于在指定的时间间隔后发出信号。它可以是单次触发或者周期触发。</p></li><li><p>基本用法：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTimer <span class="token operator">*</span>timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTimer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>timer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTimer<span class="token double-colon punctuation">::</span>timeout<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyClass<span class="token double-colon punctuation">::</span>onTimeout<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>timer<span class="token operator">-></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每隔 1000 毫秒触发一次</span></pre></td></tr></table></figure></li><li><p>停止定时器：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>timer<span class="token operator">-></span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li><li><p><strong>描述 <code>QComboBox</code> 、 <code>QMainWindow</code> 、 <code>QAction</code> 的使用场景。</strong></p><ul><li><p><strong>QComboBox</strong>：用于显示一个下拉列表，让用户从多个选项中选择一个。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QComboBox <span class="token operator">*</span>comboBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QComboBox</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>comboBox<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"Option 2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p><strong>QMainWindow</strong>：用于创建一个带有菜单栏、工具栏和状态栏的主窗口。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QMainWindow <span class="token operator">*</span>mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>mainWindow<span class="token operator">-></span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li><p><strong>QAction</strong>：表示一个可以在菜单、工具栏和快捷键中使用的操作。</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QAction <span class="token operator">*</span>action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QAction</span><span class="token punctuation">(</span><span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">"Open"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QAction<span class="token double-colon punctuation">::</span>triggered<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyClass<span class="token double-colon punctuation">::</span>openFile<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>mainWindow<span class="token operator">-></span><span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">addAction</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li></ol><h4 id="分析题-6"><a class="markdownIt-Anchor" href="#分析题-6">#</a> 分析题</h4><ol><li><p><strong>分析以下代码段，解释信号与槽的连接方式和作用：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QComboBox <span class="token operator">*</span>comboBox <span class="token operator">=</span> <span class="token keyword">new</span> QComboBox<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QComboBox<span class="token double-colon punctuation">::</span>currentIndexChanged<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Current index changed:"</span> <span class="token operator">&lt;&lt;</span> index<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li><strong>信号与槽的连接方式</strong>：<ul><li>使用 <code>connect</code> 函数将 <code>comboBox</code> 的 <code>currentIndexChanged</code> 信号连接到一个 lambda 表达式。</li></ul></li><li><strong>作用</strong>：<ul><li>当 <code>comboBox</code> 的当前索引改变时， <code>currentIndexChanged</code> 信号被发射，连接的 lambda 表达式被调用，输出当前索引。</li></ul></li></ul></li></ol><h4 id="编程题-6"><a class="markdownIt-Anchor" href="#编程题-6">#</a> 编程题</h4><ol><li><p><strong>实现一个包含 <code>QListWidget</code> 和 <code>QTreeWidget</code> 的应用程序，并演示如何动态添加和删除项。</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QVBoxLayout></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QListWidget></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTreeWidget></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QInputDialog></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">MyWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>        listWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QListWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        treeWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        treeWidget<span class="token operator">-></span><span class="token function">setHeaderLabels</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"Column 1"</span><span class="token punctuation">,</span> <span class="token string">"Column 2"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>        QPushButton <span class="token operator">*</span>addButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Add Item"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        QPushButton <span class="token operator">*</span>removeButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">"Remove Item"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>addButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyWidget<span class="token double-colon punctuation">::</span>addItem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span>removeButton<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QPushButton<span class="token double-colon punctuation">::</span>clicked<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyWidget<span class="token double-colon punctuation">::</span>removeItem<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>listWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>addButton<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        layout<span class="token operator">-></span><span class="token function">addWidget</span><span class="token punctuation">(</span>removeButton<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">bool</span> ok<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        QString text <span class="token operator">=</span> <span class="token class-name">QInputDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Add Item"</span><span class="token punctuation">,</span> <span class="token string">"Enter item text:"</span><span class="token punctuation">,</span> QLineEdit<span class="token double-colon punctuation">::</span>Normal<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ok <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>text<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            listWidget<span class="token operator">-></span><span class="token function">addItem</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>            QTreeWidgetItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTreeWidgetItem</span><span class="token punctuation">(</span>treeWidget<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            item<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            item<span class="token operator">-></span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Sub Item"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            treeWidget<span class="token operator">-></span><span class="token function">addTopLevelItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        QListWidgetItem <span class="token operator">*</span>listItem <span class="token operator">=</span> listWidget<span class="token operator">-></span><span class="token function">currentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>listItem<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token keyword">delete</span> listItem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>        QTreeWidgetItem <span class="token operator">*</span>treeItem <span class="token operator">=</span> treeWidget<span class="token operator">-></span><span class="token function">currentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>treeItem<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token keyword">delete</span> treeItem<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    QListWidget <span class="token operator">*</span>listWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    QTreeWidget <span class="token operator">*</span>treeWidget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    MyWidget widget<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    widget<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></li></ol><h3 id="七-网络"><a class="markdownIt-Anchor" href="#七-网络">#</a> 七、网络</h3><h4 id="简述题-7"><a class="markdownIt-Anchor" href="#简述题-7">#</a> 简述题</h4><ol><li><p><strong>简述 <code>QHostInfo</code> 的作用和使用方法。</strong></p><ul><li><p><strong>作用</strong>： <code>QHostInfo</code> 提供主机名与 IP 地址的查找功能。</p></li><li><p><strong>使用方法</strong>：</p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">QHostInfo</span><span class="token double-colon punctuation">::</span><span class="token function">lookupHost</span><span class="token punctuation">(</span><span class="token string">"example.com"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QHostInfo <span class="token operator">&amp;</span>host<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>host<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QHostInfo<span class="token double-colon punctuation">::</span>NoError<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token function">foreach</span> <span class="token punctuation">(</span><span class="token keyword">const</span> QHostAddress <span class="token operator">&amp;</span>address<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">addresses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Found address:"</span> <span class="token operator">&lt;&lt;</span> address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Lookup failed:"</span> <span class="token operator">&lt;&lt;</span> host<span class="token punctuation">.</span><span class="token function">errorString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li></ul></li><li><p><strong>解释 <code>QTcpServer</code> 和 <code>QTcpSocket</code> 的区别和联系。</strong></p><ul><li><strong>区别</strong>：<ul><li><code>QTcpServer</code> 用于监听传入的连接请求。</li><li><code>QTcpSocket</code> 用于客户端和服务器之间的数据传输。</li></ul></li><li><strong>联系</strong>：<ul><li><code>QTcpServer</code> 接收到连接后，会创建一个新的 <code>QTcpSocket</code> 实例用于与客户端通信。</li><li><code>QTcpSocket</code> 用于在两端之间进行读写操作。</li></ul></li></ul></li><li><p><strong>描述 <code>QUdpSocket</code> 的基本使用场景。</strong></p><ul><li>用于发送和接收 UDP 数据报。</li><li>适用于实时性要求高的场景，如视频流、游戏网络通信、简单的网络协议等。</li></ul></li></ol><h4 id="分析题-7"><a class="markdownIt-Anchor" href="#分析题-7">#</a> 分析题</h4><ol><li><p><strong>分析以下代码段，解释 TCP 服务器的工作原理：</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre>QTcpServer <span class="token operator">*</span>server <span class="token operator">=</span> <span class="token keyword">new</span> QTcpServer<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">connect</span><span class="token punctuation">(</span>server<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpServer<span class="token double-colon punctuation">::</span>newConnection<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    QTcpSocket <span class="token operator">*</span>clientSocket <span class="token operator">=</span> server<span class="token operator">-></span><span class="token function">nextPendingConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">connect</span><span class="token punctuation">(</span>clientSocket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token punctuation">[</span>clientSocket<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        QByteArray data <span class="token operator">=</span> clientSocket<span class="token operator">-></span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Received:"</span> <span class="token operator">&lt;&lt;</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>server<span class="token operator">-></span><span class="token function">listen</span><span class="token punctuation">(</span>QHostAddress<span class="token double-colon punctuation">::</span>Any<span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li><strong>工作原理</strong>：<ul><li><code>QTcpServer</code> 对象 <code>server</code> 监听来自任意地址 ( <code>QHostAddress::Any</code> ) 端口 <code>1234</code> 的连接请求。</li><li>当有新连接到来时，触发 <code>newConnection</code> 信号，创建新的 <code>QTcpSocket</code> 实例 <code>clientSocket</code> 处理这个连接。</li><li>通过连接 <code>clientSocket</code> 的 <code>readyRead</code> 信号，确保在有数据可读时，读取并打印收到的数据。</li></ul></li></ul></li></ol><h4 id="编程题-7"><a class="markdownIt-Anchor" href="#编程题-7">#</a> 编程题</h4><ol><li><p><strong>实现一个简单的 HTTP 客户端，发送 GET 请求并处理响应。</strong></p><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QCoreApplication></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpSocket></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextStream></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">HttpClient</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    Q_OBJECT</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">HttpClient</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>host<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>path<span class="token punctuation">,</span> QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token operator">:</span> <span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">host</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">port</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>connected<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>HttpClient<span class="token double-colon punctuation">::</span>sendRequest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>socket<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>HttpClient<span class="token double-colon punctuation">::</span>readResponse<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        socket<span class="token punctuation">.</span><span class="token function">connectToHost</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">private</span> slots<span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        QTextStream <span class="token function">stream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        stream <span class="token operator">&lt;&lt;</span> <span class="token string">"GET "</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">" HTTP/1.1\r\n"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        stream <span class="token operator">&lt;&lt;</span> <span class="token string">"Host: "</span> <span class="token operator">&lt;&lt;</span> host <span class="token operator">&lt;&lt;</span> "\</pre></td></tr></table></figure></li></ol></li></ol><div class="tags"><a href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="ic i-tag"></i> 学习</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-06-20 18:32:07" itemprop="dateModified" datetime="2024-06-20T18:32:07+08:00">2024-06-20</time> </span><span id="2024/06/20/qt/" class="item leancloud_visitors" data-flag-title="C++ & Qt 复习笔记" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Tviak <i class="ic i-at"><em>@</em></i>Tviak的普通观测站</li><li class="link"><strong>本文链接：</strong> <a href="https://blog.tviakowo.live/2024/06/20/qt/" title="C++ &amp; Qt 复习笔记">https://blog.tviakowo.live/2024/06/20/qt/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/03/12/%E6%98%AF%E6%96%B0%E5%9F%9F%E5%90%8D%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;TV233&#x2F;blogpic@master&#x2F;img&#x2F;77665411_p0.jpg" title="是新域名！！！！"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>是新域名！！！！</h3></a></div><div class="item right"><a href="/2024/06/20/os/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;TV233&#x2F;blogpic@master&#x2F;img&#x2F;100316398_pa0.jpg" title="操作系统复习"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>操作系统复习</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#c%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">C++ 复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#c-%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0%E8%AF%A6%E7%BB%86%E8%AE%B2%E8%A7%A3"><span class="toc-number">1.1.</span> <span class="toc-text">C++ 复习笔记（详细讲解）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 类与对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 构造函数与析构函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1%E6%8C%87%E9%92%88"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 对象数组和对象指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%90%91%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 向函数传递对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E4%B8%8E%E5%8F%8B%E5%85%83"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. 静态成员与友元</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F"><span class="toc-number">1.1.6.</span> <span class="toc-text">6. 类的继承与派生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">1.1.7.</span> <span class="toc-text">7. 多重继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%A4%9A%E6%80%81%E6%80%A7"><span class="toc-number">1.1.8.</span> <span class="toc-text">8. 多态性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-%E5%A4%8D%E4%B9%A0%E9%A2%98%E7%9B%AE"><span class="toc-number">1.2.</span> <span class="toc-text">C++ 复习题目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1-2"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 类与对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0-2"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 构造函数与析构函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1%E6%8C%87%E9%92%88-2"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 对象数组和对象指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%90%91%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E5%AF%B9%E8%B1%A1-2"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 向函数传递对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E4%B8%8E%E5%8F%8B%E5%85%83-2"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 静态成员与友元</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F-2"><span class="toc-number">1.2.6.</span> <span class="toc-text">6. 类的继承与派生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF-2"><span class="toc-number">1.2.7.</span> <span class="toc-text">7. 多重继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%A4%9A%E6%80%81%E6%80%A7-2"><span class="toc-number">1.2.8.</span> <span class="toc-text">8. 多态性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qt-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">2.</span> <span class="toc-text">Qt 对象模型复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%90%86%E8%A7%A33%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-number">2.0.1.</span> <span class="toc-text">1. 理解 3 个问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E5%AF%B9%E8%B1%A1%E6%A0%91%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.0.1.1.</span> <span class="toc-text">（1）对象树的原理和实现、创建和析构顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.0.1.2.</span> <span class="toc-text">（2）动态属性的原理与实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6"><span class="toc-number">2.0.1.3.</span> <span class="toc-text">（3）信号与槽的实现原理、工作机制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%90%86%E8%A7%A3qt%E5%85%83%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AE%B9"><span class="toc-number">2.0.2.</span> <span class="toc-text">2. 理解 “Qt 元对象系统” 内容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E5%85%83%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.0.2.1.</span> <span class="toc-text">（1）元对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E5%AF%B9%E8%B1%A1%E6%A0%91%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.0.2.2.</span> <span class="toc-text">（2）对象树示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E5%8F%8A%E5%8F%82%E8%80%83%E8%A7%A3%E7%AD%94"><span class="toc-number">2.0.3.</span> <span class="toc-text">例题及参考解答</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">3.</span> <span class="toc-text">事件系统复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-qt%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="toc-number">3.0.1.</span> <span class="toc-text">1. Qt 事件系统的基本原理和处理流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BA%A7%E7%94%9F%E5%92%8C%E6%B4%BE%E5%8F%91"><span class="toc-number">3.0.2.</span> <span class="toc-text">2. 事件的产生和派发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BA%8B%E4%BB%B6%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">3.0.3.</span> <span class="toc-text">3. 事件过滤器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.1.</span> <span class="toc-text">事件系统示例程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">3.1.1.</span> <span class="toc-text">1. 基本事件处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%8B%E4%BB%B6%E4%B8%8E%E4%BF%A1%E5%8F%B7"><span class="toc-number">3.1.2.</span> <span class="toc-text">2. 事件与信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BA%8B%E4%BB%B6%E8%BF%87%E6%BB%A4%E5%99%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">3. 事件过滤器示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">4.</span> <span class="toc-text">线程同步复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1qthread"><span class="toc-number">4.1.</span> <span class="toc-text">1.QThread</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.1.1.</span> <span class="toc-text">1.1 基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">4.1.2.</span> <span class="toc-text">1.2 成员函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E5%9F%BA%E4%BA%8E-qthread-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.1.3.</span> <span class="toc-text">1.3 基于 QThread 多线程编程示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">4.2.</span> <span class="toc-text">2. 线程同步</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.2.1.</span> <span class="toc-text">2.1 基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-%E4%BA%92%E6%96%A5%E9%87%8Fqmutex"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.2 互斥量（QMutex）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#23-%E4%BA%92%E6%96%A5%E9%94%81%E5%AE%9A%E5%99%A8qmutexlocker"><span class="toc-number">4.2.3.</span> <span class="toc-text">2.3 互斥锁定器（QMutexLocker）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#24-%E4%BF%A1%E5%8F%B7%E9%87%8Fqsemaphore"><span class="toc-number">4.2.4.</span> <span class="toc-text">2.4 信号量（QSemaphore）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E4%B8%8E%E5%8F%82%E8%80%83%E8%A7%A3%E7%AD%94"><span class="toc-number">4.3.</span> <span class="toc-text">例题与参考解答</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%981"><span class="toc-number">4.3.1.</span> <span class="toc-text">例题 1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E7%9A%84%E5%90%84%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%8F%8A%E5%85%B6%E7%89%B9%E7%82%B9"><span class="toc-number">4.4.</span> <span class="toc-text">线程同步的各种实现方式及其特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%92%E6%96%A5%E9%87%8Fqmutex"><span class="toc-number">4.4.1.</span> <span class="toc-text">1. 互斥量（QMutex）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BA%92%E6%96%A5%E9%94%81%E5%AE%9A%E5%99%A8qmutexlocker"><span class="toc-number">4.4.2.</span> <span class="toc-text">2. 互斥锁定器（QMutexLocker）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AF%BB%E5%86%99%E9%94%81qreadwritelock"><span class="toc-number">4.4.3.</span> <span class="toc-text">3. 读写锁（QReadWriteLock）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%AD%89%E5%BE%85%E6%9D%A1%E4%BB%B6qwaitcondition"><span class="toc-number">4.4.4.</span> <span class="toc-text">4. 等待条件（QWaitCondition）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BF%A1%E5%8F%B7%E9%87%8Fqsemaphore"><span class="toc-number">4.4.5.</span> <span class="toc-text">5. 信号量（QSemaphore）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E6%80%BB%E7%BB%93"><span class="toc-number">4.5.</span> <span class="toc-text">线程同步总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-number">5.</span> <span class="toc-text">3. 线程池</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qt-%E7%BB%98%E5%9B%BE%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">6.</span> <span class="toc-text">Qt 绘图复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1%E5%86%85%E5%AE%B9%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2-%E5%9B%BE%E5%BD%A2%E8%A7%86%E5%9B%BE%E6%9E%B6%E6%9E%84%E7%9A%84%E5%90%AB%E4%B9%89"><span class="toc-number">6.0.1.</span> <span class="toc-text">重点掌握内容：坐标系统与坐标变换、图形视图架构的含义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">6.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-qpainter-%E7%BB%98%E5%9B%BE"><span class="toc-number">6.2.</span> <span class="toc-text">1. QPainter 绘图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-2"><span class="toc-number">6.2.1.</span> <span class="toc-text">1.1 基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-qpainterpath-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.2.</span> <span class="toc-text">1.2 QPainterPath 的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">6.3.</span> <span class="toc-text">2. 坐标系统与坐标变换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">6.3.1.</span> <span class="toc-text">2.1 坐标变换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B3%E7%A7%BBtranslation"><span class="toc-number">6.3.1.1.</span> <span class="toc-text">平移（Translation）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%8B%E8%BD%ACrotation"><span class="toc-number">6.3.1.2.</span> <span class="toc-text">旋转（Rotation）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%A9%E6%94%BEscaling"><span class="toc-number">6.3.1.3.</span> <span class="toc-text">缩放（Scaling）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">6.3.1.4.</span> <span class="toc-text">状态保存与恢复</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-%E8%A7%86%E5%8F%A3%E5%92%8C%E7%AA%97%E5%8F%A3"><span class="toc-number">6.3.2.</span> <span class="toc-text">2.2 视口和窗口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">示例代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%9B%BE%E5%BD%A2%E8%A7%86%E5%9B%BE%E6%9E%B6%E6%9E%84"><span class="toc-number">6.4.</span> <span class="toc-text">3. 图形视图架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#31-%E5%9C%BA%E6%99%AF-%E8%A7%86%E5%9B%BE%E4%B8%8E%E5%9B%BE%E5%BD%A2%E9%A1%B9%E5%AE%9A%E4%B9%89"><span class="toc-number">6.4.1.</span> <span class="toc-text">3.1 场景、视图与图形项定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#32-%E5%9B%BE%E5%BD%A2%E8%A7%86%E5%9B%BE%E6%9E%B6%E6%9E%84%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">6.4.2.</span> <span class="toc-text">3.2 图形 &#x2F; 视图架构的坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E5%8E%9F%E7%82%B9%E5%85%B3%E7%B3%BB"><span class="toc-number">6.4.2.1.</span> <span class="toc-text">坐标原点关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">4. 图像处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#41-%E9%A2%9C%E8%89%B2%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.5.1.</span> <span class="toc-text">4.1 颜色数据的格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#42-%E5%9B%BE%E5%83%8F%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.5.2.</span> <span class="toc-text">4.2 图像格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#43-%E8%AE%BF%E9%97%AE%E9%A2%9C%E8%89%B2%E6%95%B0%E6%8D%AE"><span class="toc-number">6.5.3.</span> <span class="toc-text">4.3 访问颜色数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E4%B8%8E%E5%8F%82%E8%80%83%E8%A7%A3%E7%AD%94-2"><span class="toc-number">6.6.</span> <span class="toc-text">例题与参考解答</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%981qpainter-%E7%BB%98%E5%9B%BE"><span class="toc-number">6.6.1.</span> <span class="toc-text">例题 1：QPainter 绘图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%982%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2"><span class="toc-number">6.6.2.</span> <span class="toc-text">例题 2：坐标变换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%983%E5%9B%BE%E5%BD%A2%E8%A7%86%E5%9B%BE%E6%9E%B6%E6%9E%84"><span class="toc-number">6.6.3.</span> <span class="toc-text">例题 3：图形视图架构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E7%BB%84%E4%BB%B6%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">7.</span> <span class="toc-text">界面组件复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1%E5%86%85%E5%AE%B9%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%95%B0%E6%8D%AE-qtimer-qcombobox-qmainwindow-qaction-qlistwidget-qtreewidget-qtablewidget%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.0.1.</span> <span class="toc-text">重点掌握内容：日期时间数据、QTimer、QComboBox、QMainWindow、QAction、QListWidget、QTreeWidget、QTableWidget 的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-2"><span class="toc-number">7.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%95%8C%E9%9D%A2%E7%BB%84%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">7.2.</span> <span class="toc-text">1. 界面组件概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-qstring-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-number">7.3.</span> <span class="toc-text">2. QString 字符串操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-qspinbox"><span class="toc-number">7.4.</span> <span class="toc-text">3. QSpinBox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8C%89%E9%92%AE%E7%BB%84%E4%BB%B6"><span class="toc-number">7.5.</span> <span class="toc-text">4. 按钮组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-qslider"><span class="toc-number">7.6.</span> <span class="toc-text">5. QSlider</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E6%95%B0%E6%8D%AE"><span class="toc-number">7.7.</span> <span class="toc-text">6. 日期时间数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-qtimer"><span class="toc-number">7.8.</span> <span class="toc-text">7. QTimer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-qcombobox"><span class="toc-number">7.9.</span> <span class="toc-text">8. QComboBox</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-qmainwindow-%E5%92%8C-qaction"><span class="toc-number">7.10.</span> <span class="toc-text">9. QMainWindow 和 QAction</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#91-qmainwindow"><span class="toc-number">7.10.1.</span> <span class="toc-text">9.1 QMainWindow</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#92-qaction"><span class="toc-number">7.10.2.</span> <span class="toc-text">9.2 QAction</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-qlistwidget"><span class="toc-number">7.11.</span> <span class="toc-text">10. QListWidget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-qtreewidget"><span class="toc-number">7.12.</span> <span class="toc-text">11. QTreeWidget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-qtablewidget"><span class="toc-number">7.13.</span> <span class="toc-text">12. QTableWidget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F"><span class="toc-number">7.14.</span> <span class="toc-text">编程示例程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B1qtimer-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.1.</span> <span class="toc-text">示例 1：QTimer 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B2qcombobox-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.2.</span> <span class="toc-text">示例 2：QComboBox 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B3qmainwindow-%E5%92%8C-qaction-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.3.</span> <span class="toc-text">示例 3：QMainWindow 和 QAction 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B4qlistwidget-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.4.</span> <span class="toc-text">示例 4：QListWidget 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B5qtreewidget-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.5.</span> <span class="toc-text">示例 5：QTreeWidget 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B6qtablewidget-%E4%BD%BF%E7%94%A8"><span class="toc-number">7.14.6.</span> <span class="toc-text">示例 6：QTableWidget 使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">8.</span> <span class="toc-text">网络编程复习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1%E5%86%85%E5%AE%B9qhostinfo-qtcpserver-qtcpsocket-qudpsocket-%E7%9A%84%E4%BD%BF%E7%94%A8-http%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99"><span class="toc-number">8.0.1.</span> <span class="toc-text">重点掌握内容：QHostInfo、QTcpServer、QTcpSocket、QUdpSocket 的使用、HTTP 应用程序编写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-3"><span class="toc-number">8.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.</span> <span class="toc-text">1. 主机信息查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-qhostinfo"><span class="toc-number">8.2.1.</span> <span class="toc-text">1.1 QHostInfo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-tcp%E9%80%9A%E4%BF%A1"><span class="toc-number">8.3.</span> <span class="toc-text">2. TCP 通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-qtcpserver"><span class="toc-number">8.3.1.</span> <span class="toc-text">2.1 QTcpServer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#22-qtcpsocket"><span class="toc-number">8.3.2.</span> <span class="toc-text">2.2 QTcpSocket</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-udp%E9%80%9A%E4%BF%A1"><span class="toc-number">8.4.</span> <span class="toc-text">3. UDP 通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#31-qudpsocket"><span class="toc-number">8.4.1.</span> <span class="toc-text">3.1 QUdpSocket</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9F%BA%E4%BA%8Ehttp%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">8.5.</span> <span class="toc-text">4. 基于 HTTP 的网络应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#41-qnetworkaccessmanager"><span class="toc-number">8.5.1.</span> <span class="toc-text">4.1 QNetworkAccessManager</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-number">9.</span> <span class="toc-text">例题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-c%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">9.1.</span> <span class="toc-text">一、C++ 面向对象程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98"><span class="toc-number">9.1.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98"><span class="toc-number">9.1.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98"><span class="toc-number">9.1.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">9.2.</span> <span class="toc-text">二、对象模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-2"><span class="toc-number">9.2.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-2"><span class="toc-number">9.2.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-2"><span class="toc-number">9.2.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">9.3.</span> <span class="toc-text">三、事件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-3"><span class="toc-number">9.3.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-3"><span class="toc-number">9.3.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-3"><span class="toc-number">9.3.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">9.4.</span> <span class="toc-text">四、多线程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-4"><span class="toc-number">9.4.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-4"><span class="toc-number">9.4.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-4"><span class="toc-number">9.4.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-%E7%BB%98%E5%9B%BE"><span class="toc-number">9.5.</span> <span class="toc-text">五、绘图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-5"><span class="toc-number">9.5.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-5"><span class="toc-number">9.5.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-5"><span class="toc-number">9.5.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-%E7%95%8C%E9%9D%A2%E7%BB%84%E4%BB%B6"><span class="toc-number">9.6.</span> <span class="toc-text">六、界面组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-6"><span class="toc-number">9.6.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-6"><span class="toc-number">9.6.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-6"><span class="toc-number">9.6.3.</span> <span class="toc-text">编程题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83-%E7%BD%91%E7%BB%9C"><span class="toc-number">9.7.</span> <span class="toc-text">七、网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E9%A2%98-7"><span class="toc-number">9.7.1.</span> <span class="toc-text">简述题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E9%A2%98-7"><span class="toc-number">9.7.2.</span> <span class="toc-text">分析题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98-7"><span class="toc-number">9.7.3.</span> <span class="toc-text">编程题</span></a></li></ol></li></ol></li></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Tviak" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Tviak</p><div class="description" itemprop="description">观测世界和自己的一般通过观测者</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">45</span> <span class="name">文章</span></a></div><div class="item tags"><a href="/tags/"><span class="count">9</span> <span class="name">标签</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>主页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/03/12/%E6%98%AF%E6%96%B0%E5%9F%9F%E5%90%8D%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/06/20/os/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2020/04/25/%E6%B5%8B%E8%AF%95/" title="233">233</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/29/%E6%B7%B1%E5%85%A5CSS/" title="深入CSS 青训营前端基础班 Day3">深入CSS 青训营前端基础班 Day3</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/08/17/day810/" title="CSS布局技巧">CSS布局技巧</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2020/03/18/%E5%A5%BD%E5%83%8F%E5%BC%84%E5%A5%BD%E4%BA%86/" title="233">233</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/08/06/%E7%88%B1%E6%80%9D%E8%87%AA%E7%AD%BE%E9%97%AE%E9%A2%98/" title="爱思自签问题">爱思自签问题</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/08/08/day6/" title="HTTP 实用指南笔记">HTTP 实用指南笔记</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/07/22/CSS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="CSS学习笔记">CSS学习笔记</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2023/11/07/20231107/" title="随便写写">随便写写</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/01/24/20220124/" title="20220124">20220124</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/10/11/clone%E9%97%AE%E9%A2%98/" title="使用dev-sidecar解决git clone问题">使用dev-sidecar解决git clone问题</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Tviak @ Tviak's Observatory</span></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">136k 字</span> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">3:05</span></div><p id="hitokoto"><a href="#" id="hitokoto_text">:D 获取中...</a></p><script>fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      const hitokoto = document.querySelector('#hitokoto_text')
      hitokoto.href = `https://hitokoto.cn/?uuid=${data.uuid}`
      hitokoto.innerText = data.hitokoto
    })
    .catch(console.error)</script><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span><br><a href="https://icp.gov.moe/?keyword=20237705" target="_blank">萌ICP备20237705号</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2024/06/20/qt/",favicon:{show:"（●´3｀●）",hide:"(´Д｀)"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>